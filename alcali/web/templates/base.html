{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <title>Alcali</title>
  <!-- Favicon-->
  <link rel="icon" type="image/png" href="{% static "img/favicon-32x32.png" %}" sizes="32x32"/>
  <link rel="icon" type="image/png" href="{% static "img/favicon-16x16.png" %}" sizes="16x16"/>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet"
        type="text/css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
  <link href="{% static 'css/themes/theme-black.css' %}" rel="stylesheet">
  <style>
    .dropdown-menu ul.menu {
      list-style-type: none;
    }
  </style>

  {% block css %}{% endblock %}
</head>

<body class="theme-black">
<!-- Page Loader -->
<div class="page-loader-wrapper">
  <div class="loader">
    <div class="preloader">
      <div class="spinner-layer pl-grey">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div>
        <div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
    <p>Please wait...</p>
  </div>
</div>
<!-- #END# Page Loader -->
<!-- Overlay For Sidebars -->
<div class="overlay"></div>
<!-- #END# Overlay For Sidebars -->
<!-- Search Bar -->
<div class="search-bar">
  <div class="search-icon">
    <i class="material-icons">search</i>
  </div>
  <input type="text" placeholder="SEARCH JOBS, MINIONS ...">
  <div class="close-search">
    <i class="material-icons">close</i>
  </div>
</div>
<!-- #END# Search Bar -->
<!-- Top Bar -->
<nav class="navbar">
  <div class="container-fluid">
    <div class="navbar-header">
      <a href="javascript:void(0);" class="navbar-toggle collapsed" data-toggle="collapse"
         data-target="#navbar-collapse" aria-expanded="false"></a>
      <a href="javascript:void(0);" class="bars"></a>
      <a class="navbar-brand" href="/">ALCALI - <b>{% block title %}{% endblock %}</b></a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <!-- Call Search -->
        <li><a href="javascript:void(0);" class="js-search" data-close="true"><i class="material-icons">search</i></a>
        </li>
        <!-- #END# Call Search -->
        <!-- Notifications -->
        <li class="dropdown">
          <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" id="notif-button">
            <i class="material-icons">notifications</i>
            <span class="label-count bg-red" id="notif-nb"></span>
          </a>
          <ul class="dropdown-menu" style="width: max-content;">
            <li class="header">NOTIFICATIONS</li>
            <li class="body">
              <ul class="menu" id="notif-list">
                {% if notifs_list %}
                  {% for notif in notifs_list %}
                    <li style="display: -webkit-box;" id="{{ notif.id }}">
                      <a href="{{ notif.notif_attr.link }}" class=" waves-effect waves-block">
                        <div class="icon-circle {{ notif.notif_attr.color }}">
                          <i class="material-icons">{{ notif.notif_attr.icon }}</i>
                        </div>
                        <div class="menu-info">
                          <h4>{{ notif.notif_attr.text }}</h4>
                          <p>
                            <i class="material-icons">access_time</i>{{ notif.datetime }}
                          </p>
                        </div>
                      </a>
                        <span class="btn badge" onclick="notifDelete({{ notif.id }})">x</span>
                    </li>
                  {% endfor %}
                {% endif %}
              </ul>
            </li>
            <li class="footer">
              <a href="#" onclick="notifDelete('*');return false;" title="Clear all notifications">Clear all</a>
            </li>
          </ul>
        </li>
        <!-- #END# Notifications -->
        <li class="pull-right"><a href="javascript:void(0);" class="js-right-sidebar" data-close="true"><i
            class="material-icons">more_vert</i></a></li>
      </ul>
    </div>
  </div>
</nav>
<!-- #Top Bar -->
<section>
  <!-- Left Sidebar -->
  <aside id="leftsidebar" class="sidebar">
    <!-- User Info -->
    <div class="user-info">
      <div class="info-container">
        <div class="name" data-toggle="dropdown" aria-haspopup="true"
             aria-expanded="false">{{ request.user.username|capfirst }}</div>
        <div class="email">{{ request.user.email }}</div>
        <div class="btn-group user-helper-dropdown">
          <i class="material-icons" data-toggle="dropdown" aria-haspopup="true"
             aria-expanded="true">keyboard_arrow_down</i>
          <ul class="dropdown-menu pull-right">
            <li><a href="{% url 'users' %}?user={{ request.user.username }}"><i
                class="material-icons">person</i>User</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="javascript:void(0);"><i class="material-icons">group</i>Followers</a></li>
            <li><a href="javascript:void(0);"><i class="material-icons">shopping_cart</i>Sales</a></li>
            <li><a href="javascript:void(0);"><i class="material-icons">favorite</i>Likes</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="{% url 'logout' %}"><i class="material-icons">input</i>Sign Out</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- User Info -->
    <!-- Menu -->
    <div class="menu">
      <ul class="list">
        <li  {% if request.path == '/' %} class="active"{% endif %}>
          <a href="{% url 'index' %}">
            <i class="material-icons">dashboard</i>
            <span>Overview</span>
          </a>
        </li>
        <li  {% if request.path == '/minions' %} class="active"{% endif %}>
          <a href="{% url 'minions' %}">
            <i class="material-icons">device_hub</i>
            <span>Minions</span>
          </a>
        </li>
        <li  {% if request.path == '/jobs' %} class="active"{% endif %}>
          <a href="{% url 'job_list' %}">
            <i class="material-icons">playlist_play</i>
            <span>Jobs</span>
          </a>
        </li>
        <li  {% if request.path == '/run' %} class="active"{% endif %}>
          <a href="{% url 'run' %}">
            <i class="material-icons">play_arrow</i>
            <span>Run</span>
          </a>
        </li>
        <li  {% if request.path == '/schedule' %} class="active"{% endif %}>
          <a href="{% url 'schedule' %}">
            <i class="material-icons">schedule</i>
            <span>Schedule</span>
          </a>
        </li>
        <li  {% if request.path == '/conformity' %} class="active"{% endif %}>
          <a href="{% url 'conformity' %}">
            <i class="material-icons">done_all</i>
            <span>Conformity</span>
          </a>
        </li>
        <li  {% if request.path == '/keys' %} class="active"{% endif %}>
          <a href="{% url 'keys' %}">
            <i class="material-icons">compare_arrows</i>
            <span>Keys</span>
          </a>
        </li>
        <li  {% if request.path == '/events' %} class="active"{% endif %}>
          <a href="{% url 'events' %}">
            <i class="material-icons">playlist_add</i>
            <span>Events</span>
          </a>
        </li>
        <li class="header"></li>
        {% if request.user.is_staff %}
          <li  {% if request.path == '/users' %} class="active"{% endif %}>
            <a href="{% url 'users' %}">
              <i class="material-icons">person</i>
              <span>Users</span>
            </a>
          </li>
          <li  {% if request.path == '/settings' %} class="active"{% endif %}>
            <a href="{% url 'settings' %}">
              <i class="material-icons">settings</i>
              <span>Settings</span>
            </a>
          </li>
        {% endif %}
      </ul>
    </div>
    <!-- #Menu -->
    <!-- FAB -->
    <div class="inner-fabs">
      {% block fab %}
      {% endblock %}
    </div>
    <div class="fab round bg-pink waves-effect waves-circle waves-float" id="fab1">
      <i class="material-icons" id="fabIcon">menu</i>
    </div>
    <!-- #FAB -->
    <!-- Footer -->
    <div class="legal btn btn-link waves-effect" id="miniSidebar1">
      <div class="row clearfix">
        <div class="col-lg-12">
          <div style="text-align: center">
            <span><b>Collapse Sidebar</b></span><i class="material-icons pull-right rotate">keyboard_arrow_left</i>
          </div>
        </div>
      </div>
    </div>
    <!-- #Footer -->
  </aside>
  <!-- #END# Left Sidebar -->
  <!-- Right Sidebar -->
  <aside id="rightsidebar" class="right-sidebar">
    <div class="tab-pane fade in active in active" id="settings">
      <div class="demo-settings">
        <p>GENERAL SETTINGS</p>
        <ul class="setting-list">
          <li>
            <span>Init Database</span>
            <button class="btn bg-purple waves-effect pull-right" id="initDb">Submit</button>
          </li>
          <li>
            <span>Mini sidebar</span>
            <div class="switch">
              <label><input type="checkbox" id="miniSidebar"><span class="lever"></span></label>
            </div>
          </li>
        </ul>
        <p>SYSTEM SETTINGS</p>
        <ul class="setting-list">
          <li>
            <span>Notifications</span>
            <div class="switch">
              <label><input type="checkbox" checked><span class="lever"></span></label>
            </div>
          </li>
          <li>
            <span>Auto Updates</span>
            <div class="switch">
              <label><input type="checkbox" checked><span class="lever"></span></label>
            </div>
          </li>
        </ul>
        <p>ACCOUNT SETTINGS</p>
        <ul class="setting-list">
          <li>
            <span>Offline</span>
            <div class="switch">
              <label><input type="checkbox"><span class="lever"></span></label>
            </div>
          </li>
          <li>
            <span>Location Permission</span>
            <div class="switch">
              <label><input type="checkbox" checked><span class="lever"></span></label>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </aside>
  <!-- #END# Right Sidebar -->
</section>

<section class="content">
  <div class="container-fluid">
    {% block content %}
    {% endblock %}
  </div>
</section>

<!-- Main Js -->
<script>
  let token = '{{ csrf_token }}';
  let notifCreated = '{{ request.user.user_settings.notifs_created }}';
  let notifPublished = '{{ request.user.user_settings.notifs_published }}';
  let notifReturned = '{{ request.user.user_settings.notifs_returned }}';
  let notifEvent = '{{ request.user.user_settings.notifs_event }}';
</script>
<script src="{% static "js/dist/main.js" %}"></script>
<script src="{% static "js/dist/vendor.js" %}"></script>
<script src="{% static "js/admin.js" %}"></script>
<script src="{% static "js/notifications.js" %}"></script>
<script src="{% static "js/src/utils/common.js" %}"></script>
<script src="{% static "js/src/utils/notifs.js" %}"></script>
<script src="{% static "js/src/base.js" %}"></script>

<!-- Custom Js -->

{% block js %}{% endblock %}
</body>

</html>
