(function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)o=r[d],a[o]&&m.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"0560":function(t,e,n){"use strict";n("4601")},"168d":function(t,e,n){"use strict";n("c1b6")},2394:function(t){t.exports={common:{Search:"Chercher"},components:{mixins:{UserCard:{Users:"Utilisateurs",Create:"Créer",CreateUser:"Créer l'utilisateur",UpdateUser:"Mettre à jour l'utilisateur",Update:"Mettre à jour",Discard:"Annuler",View:"Voir",Renew:"Renouveller",Revoke:"Révoquer",Delete:"Supprimer",ActionMsg:"cette action est irréversible.",Close:"Fermer",Token:"Token",DateJoined:"Date d'inscription",Username:"Nom d'utilisateur",Email:"Email",FirstName:"Prénom",LastName:"Nom",Password:"Mot de passe",StaffUser:"Administrateur",UserCreated:"Utilisateur créé",UserUpdated:"Utilisateur mis à jour",UserDeleted:"Utilisateur supprimé",Action:"Action",UsernameRequired:"Le nom d'utilisateur est requis",EmailRequired:"L'adresse mail est requise",EmailValid:"L'adresse mail doit être valide"}},core:{Fab:{Close:"fermer",Menu:"menu"},Layout:{Person:"Personnes",Group:"Groupe",Users:"Utilisateurs",Settings:"Options",Collapse:"REPLIER",Notifications:"Notifications",NoNotifications:"pas de nouvelles notifications",Clear:"Effacer",ToggleTheme:"Activer Theme",Logout:"Déconnexion",Overview:"Aperçu",Minions:"Minions",Jobs:"Tâches",Run:"Exécuter",JobTemplates:"Modèles de tâches",Conformity:"Conformité",Schedules:"Plannings",Events:"Événements",Keys:"Clés",Search:"Chercher jids, minions, states...",Job_:"Tâche ","_published for_":" publiée pour ","_returned for_":" retournée pour ",JobEvent:"Événement de tâche",NewJobCreated:"Nouvelle Tâche créée"}},CommonSettings:{Title:"Paramètres Généraux",Parse:"Parser les modules depuis:",Submit:"Envoyer",Fields:"Champs des Minions",Delete:"Supprimer",Create:"Créer",Conformity:"Conformité personnalisée",Target:"Cible",Name:"Nom",Function:"Fonction",Functions:"Fonctions",ParseModulesStart:"Début de l'inventaire des modules",ConformityDeleted:"Conformité supprimée",ConformityCreated:"conformity created",MinionsFieldsCreated:"minions fields created"},ConformityCard:{Highstate:"HighState",true:"oui",false:"non",unknown:"inconnu"},ConformityChart:{conformity:"Conformité",conform:"conforme",conflict:"conflit",unknown:"inconnu"},ConformityDetailCard:{HighstateConformity:"Conformité Highstate"},ConformityTable:{Conformity:"Conformité",detail:"détail",highstate:"highstate",Unknown:"Inconnu",True:"Oui",False:"Non","Minion id":"Id du minion","Last Highstate":"Dernier Highstate","Highstate Conformity":"Conformité Highstate",Succeeded:"Réussi",Unchanged:"Inchangé",Failed:"En échec",Actions:"Actions"},CronPicker:{Cancel:"Annuler",Save:"Sauvegarder"},EventsTable:{Events:"Événements",Tag:"Tag",Jid:"Jid",Target:"Cible",Function:"Fonction",Arguments:"Arguments",Date:"Date"},InfosCard:{Common:"Général",Salt:"Salt",Hardware:"Appareil"},JobsChartCard:{Stats:"Statistiques des tâches",Filter:"Filtre",Period:"Periode",All:"Tout",Highstate:"Highstate",Other:"Autre",Week:"Semaine",TwoWeeks:"2 Semaines",Month:"Mois",Year:"Année"},JobsTable:{SearchJobs:"Chercher Tâches",Cancel:"Annuler",Job:"Tâche",JID:"Jid",Target:"Cible",Function:"Fonction",Arguments:"Arguments",KeywordArguments:"Mots clés Arguments",User:"Utilisateur",Status:"État",Date:"Date",Action:"Action",Limit:"Limite",SelectDate:"Sélection de date(s)",Success:" Succès",Failed:"Échec",Rerun:"relancer",Detail:"détail"},JobTemplatesTable:{JobTemplate:"Modèles de tâches",Run:"Exécuter",Edit:"Éditer",Delete:"Supprimer",Name:"Nom",Client:"Client",TargetType:"Type de cible",Target:"Cible",Function:"Fonction",Arguments:"Arguments",KeywordArguments:"Mots clés Arguments",Batch:"Groupe",Actions:"Actions",TemplateDeleted:"Modèle supprimé"},KeysStatusCard:{keys:"Clés",saltWebsocket:"Websocket Salt",accepted:"acceptées",rejected:"rejetées",denied:"interdites",unaccepted:"non acceptées"},Keys:{Refresh:"Actualiser les clés",AcceptAll:"Accepter toutes les clés",RejectAll:"Rejeter toutes les clés",RefreshingKeys:"Actualisation des clés",KeysRefreshed:"Clés actualisées"},KeysTable:{Keys:"Clés",MinionId:"ID Minion",Status:"État",PublicKey:"Clés publiques",Actions:"Actions",reject:"rejeter",delete:"supprimer",accept:"accepter",accepted:"Acceptée",unaccepted:"En attente",rejected:"Rejetée",denied:"Refusée"},Minions:{RefreshAll:"Actualiser tous les minions",JobAll:"Lancer une tâche sur tous les minions",Refreshing:"Actualisation des minions",NbMinionsRefreshed:"{0} minions actualisés"},MinionDetail:{RefreshMinion:"Actualiser ",JobMinion:"Lancer une tâche sur ",HighstateMinion:"Appliquer Highstate sur ","Refreshing ":"Actualisation de {0}",MinionRefreshed:"Minion actualisé",MissingMinion:"{0} est absent de la base. Essayez d'actualiser les minions"},MinionDetailCard:{Grains:"Grains",Pillar:"Pillar",History:"Historique",Graph:"Graph",Fold:"Replier",Unfold:"Déplier"},MinionsTable:{Minion:"Minion",Column:"Colonne",Refresh:"Actualiser",Run:"Exécuter tâche",Delete:"Supprimer",Msg1:"Si vous supprimez ",Msg2:" de la base de données, vous devrez actualiser tous les minions.",Refreshing:"Raffraîchissement de ",Deleted:" supprimé",Close:"Fermer",Detail:"Détails"},NetworkCard:{Network:"Réseau",Interface:"Interface",MAC:"Mac",DNS:"Dns",IPV4Gateway:"Passerelle IP V4",IPV6Gateway:"Passerelle IP V6"},NotFound:{404:"404. Cette page n'existe pas.",Title:"Oops",Back:"Retour"},RunCard:{Run:"Exécuter",Formatted:"Formulaire",Cli:"Terminal",ClientType:"Type du client:",Info:"info",Recurring:"Répéter:",Every:"Tou(te)s les",Results:"Résultats",Clear:"Effacer",Save:"Sauvegarder",Test:"Tester",TemplateSaved:"Modèle {0} sauvegardé",SaveAsTemplate:"Sauvegarder en tant que modèle",JobTemplateName:"Nom du modèle de tâche",Pillar:"Pillar",Schedule:"Planifier",ScheduleName:"Nom du planning",Async:"Asynchrone",Batch:"Groupe",Timeout:"Délai",TargetType:"Type de cible",Target:"Cible",Function:"Fonction",Arguments:"Arguments",KeywordArguments:"Mots clés Arguments",RunOnce:"Tâche unique:  ",Running:"Lancement de",Scheduling:"Planification de"},Schedules:{Refresh:"Actualiser les tâches",Refreshing:"Actualisation des tâches",Refreshed:"Tâches actualisées"},ScheduleTable:{Schedules:"Plannings",Disable:"désactiver",Enable:"activer",Delete:"Supprimer",MinionJobAction:"{0} sur ${1} pour la tâche ${2}",MinionJobActionDone:"${0} sur ${1} pour la tâche ${2}: terminé"},UserSettings:{UserSettings:"Options utilisateur",JobsNotifications:"Notifications de tâches",MaxNotifications:"Notifications maximum",Submit:"Envoyer",created:"créées",published:"publiées",returned:"résultat reçu",event:"évènement",UserSettingsUpdated:"Préférences utilisateur mises à jour",Language:"Langage"},AlcaliStatusCard:{Status:"Statut",saltWebsocket:"Salt Websocket",jobs:"tâches",events:"évènements",schedules:"planifiés",OK:"OK",NOT_OK:"ERREUR"},TerminalCard:{Running:"Lancement de "}},views:{ConformityDetail:{Succeeded:"Réussi",Unchanged:"Inchangé",Failed:"Échoué"},JobDetail:{Success:"Réussi",Failed:"Échoué",MinionID:"ID MINION:",Arguments:"ARGUMENTS:",KeywordArguments:"MOT CLÉS ARGUMENTS:",JobID:"ID TACHE:",Function:"FONCTION:",Status:"ÉTAT:",StartTime:"DÉBUT:",Results:"Résultats"},Login:{LoginTitle:"Connexion",Login:"Identifiant",Password:"Mot de passe",InvalidCredentials:"Identifiant ou mot de passe invalides",Unauthorized:"Non autorisé",SignIn:"Se connecter"},Search:{NoResult:"Désolé... Aucun résultat.",Success:"Réussi",Failed:"Échoué"}}}},"355a":function(t,e,n){"use strict";n("6774")},"383d":function(t,e,n){},"3e50":function(t,e,n){t.exports=n.p+"static/img/zh.1e957e9c.png"},4601:function(t,e,n){},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=i(t);return n(e)}function i(t){var e=s[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}a.keys=function(){return Object.keys(s)},a.resolve=i,t.exports=a,a.id="4678"},"4e8f":function(t,e,n){"use strict";n("8e9c")},"4ffd":function(t,e,n){t.exports=n.p+"static/img/logo.567c9b3a.png"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d3b7"),n("159b"),n("14d9"),n("caad"),n("2532");var s=n("2b0e"),a=n("7496"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(a["a"],[t.layout?n("simple-layout"):n("app-layout")],1)},o=[],r=n("40dc"),l=n("5bc1"),c=n("4ca6"),u=n("8336"),d=n("b0af"),m=n("99d9"),h=n("ce7e"),f=n("0789"),p=n("132d"),g=n("8860"),b=n("da13"),v=n("1800"),_=n("8270"),y=n("5d23"),C=n("f6c4"),k=n("e449"),S=n("f774"),T=n("2fa4"),$=n("8654"),x=n("2a7f"),w=n("3a2f"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(a["a"],[n(S["a"],{attrs:{"mini-variant":t.settings.Layout.mini,app:"",clipped:""},scopedSlots:t._u([{key:"append",fn:function(){return[n(b["a"],{staticClass:"elevation-24",on:{click:function(e){return e.stopPropagation(),t.updateDomAndSettings("mini")}}},[n(v["a"],[t.settings.Layout.mini?n(p["a"],[t._v("arrow_forward")]):n(p["a"],[t._v("arrow_back")])],1),n(y["g"],[n(y["k"],[t._v(t._s(t.$t("components.core.Layout.Collapse")))])],1)],1)]},proxy:!0}]),model:{value:t.settings.Layout.drawer,callback:function(e){t.$set(t.settings.Layout,"drawer",e)},expression:"settings.Layout.drawer"}},[n(g["a"],{staticClass:"py-0",attrs:{dense:"",nav:"",dark:"",color:"#212121"}},[n(b["a"],{class:t.settings.Layout.mini&&"px-0",attrs:{"two-line":""}},[n(_["a"],[n(p["a"],{attrs:{large:""}},[t._v("person")])],1),n(y["g"],[n(y["k"],[t._v(t._s(t.username))]),n(y["j"],[t._v(t._s(t.email))])],1)],1)],1),n(h["a"]),n(g["a"],{attrs:{dense:""}},t._l(t.routes,function(e){return n(b["a"],{key:e.name,attrs:{to:""+e.path}},[t.settings.Layout.mini?n(v["a"],[n(w["a"],{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[n(p["a"],t._g({},a),[t._v(t._s(e.icon))])]}}],null,!0)},[n("span",[t._v(t._s(t.$t(e.name)))])])],1):n(v["a"],[n(p["a"],[t._v(t._s(e.icon))])],1),n(y["g"],[n(y["k"],[t._v(t._s(t.$t(e.name)))])],1)],1)}),1),n(h["a"]),n(g["a"],{attrs:{dense:""}},[n(b["a"],{attrs:{to:"/users"}},[t.settings.Layout.mini?n(v["a"],[n(w["a"],{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n(p["a"],t._g({},s),[t._v("group")])]}}],null,!1,3527340433)},[n("span",[t._v(t._s(t.$t("components.core.Layout.Users")))])])],1):n(v["a"],[n(p["a"],[t._v("group")])],1),n(y["g"],[n(y["k"],[t._v(t._s(t.$t("components.core.Layout.Users")))])],1)],1),n(b["a"],{attrs:{to:"/settings"}},[t.settings.Layout.mini?n(v["a"],[n(w["a"],{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n(p["a"],t._g({},s),[t._v("settings")])]}}],null,!1,1926182315)},[n("span",[t._v(t._s(t.$t("components.core.Layout.Settings")))])])],1):n(v["a"],[n(p["a"],[t._v("settings")])],1),n(y["g"],[n(y["k"],[t._v(t._s(t.$t("components.core.Layout.Settings")))])],1)],1)],1)],1),n(r["a"],{attrs:{color:"black",dark:"",app:"","clipped-left":""}},[n(l["a"],{on:{click:function(e){return e.stopPropagation(),t.updateDomAndSettings("drawer")}}}),n(x["c"],{staticClass:"font-weight-bold"},[t._v("ALCALI")]),n(T["a"]),n(f["f"],[n($["a"],{directives:[{name:"show",rawName:"v-show",value:t.expand_search,expression:"expand_search"}],staticClass:"mx-auto search",attrs:{flat:"","hide-details":"",label:t.$t("components.core.Layout.Search"),"solo-inverted":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchBar.apply(null,arguments)}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1),n(u["a"],{staticClass:"mr-2",attrs:{icon:""},on:{click:function(e){t.expand_search=!t.expand_search}}},[n(p["a"],[t._v("search")])],1),n(k["a"],{attrs:{bottom:"",left:"","offset-y":"","offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n(c["a"],{attrs:{color:t.notif_nb>0?"primary":"transparent",overlap:""},scopedSlots:t._u([{key:"badge",fn:function(){return[t.notif_nb>0?n("span",[t._v(t._s(t.notif_nb))]):t._e()]},proxy:!0}],null,!0)},[n(p["a"],t._g({on:{click:function(e){t.notif_nb=0}}},s),[t._v("notifications")])],1)]}}]),model:{value:t.notif_menu,callback:function(e){t.notif_menu=e},expression:"notif_menu"}},[n(d["a"],{attrs:{"min-width":"500px","max-width":"500px"}},[n(g["a"],{attrs:{"max-height":"700px"}},[0===t.messages.length?n(b["a"],[n(y["g"],[n(y["j"],[t._v(t._s(t.$t("components.core.Layout.NoNotifications")))])],1)],1):t._e(),t._l(t.messages,function(e,s){return n(b["a"],{key:s,attrs:{to:e.link}},[n(_["a"],[n(p["a"],{attrs:{dark:"",color:e.color,size:"62"}},[t._v(t._s(e.icon))])],1),n(y["g"],[n(y["k"],[t._v(t._s(e.text))]),n(y["j"],[t._v(t._s(e.tag))])],1)],1)})],2),n(m["b"],{directives:[{name:"show",rawName:"v-show",value:t.messages.length>0,expression:"messages.length > 0"}]},[n(T["a"]),n(u["a"],{attrs:{text:""},on:{click:function(e){t.messages=[]}}},[t._v(t._s(t.$t("components.core.Layout.Clear")))])],1)],1)],1),n(k["a"],{attrs:{bottom:"",left:"","offset-y":"","offset-x":"","close-on-click":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n(u["a"],t._g({attrs:{icon:""}},s),[n(p["a"],[t._v("more_vert")])],1)]}}])},[n(g["a"],[n(b["a"],{on:{click:function(e){return t.updateDomAndSettings("dark")}}},[n(y["k"],[t._v(t._s(t.$t("components.core.Layout.ToggleTheme")))])],1),n(h["a"]),n(b["a"],{on:{click:t.logout}},[n(y["k"],[t._v(t._s(t.$t("components.core.Layout.Logout")))])],1)],1)],1)],1),n(C["a"],[n(f["i"],{attrs:{mode:"out-in"}},[n("router-view",{key:t.$route.fullPath})],1)],1)],1)},D=[],A=n("5530"),M=(n("b64b"),n("9911"),n("3c65"),n("a434"),n("ac1f"),n("00b4"),n("2f62")),R=n("91a3"),J=(n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),{methods:{fnmatch:function(t){if(-1===t.indexOf("*"))return function(e){return t===e};var e=/[\\^$.*+?()[\]{}|]/g,n=t.replace(e,"\\$&"),s=new RegExp("^"+n.replace(/\\\*/g,".*")+"$");return function(t){return s.test(t)}},sleep:function(t){return new Promise(function(e){return setTimeout(e,t)})}}}),U={name:"Layout",props:{source:String},data:function(){return{expand_search:!1,notif_menu:!1,searchInput:"",messages:[],notif_nb:0,routes:[{name:"components.core.Layout.Overview",path:"/",icon:"dashboard"},{name:"components.core.Layout.Minions",path:"/minions",icon:"device_hub"},{name:"components.core.Layout.Jobs",path:"/jobs",icon:"playlist_play"},{name:"components.core.Layout.Run",path:"/run",icon:"play_arrow"},{name:"components.core.Layout.JobTemplates",path:"/job_templates",icon:"playlist_add_check"},{name:"components.core.Layout.Schedules",path:"/schedules",icon:"schedule"},{name:"components.core.Layout.Conformity",path:"/conformity",icon:"done_all"},{name:"components.core.Layout.Keys",path:"/keys",icon:"vpn_key"},{name:"components.core.Layout.Events",path:"/events",icon:"playlist_add"}]}},methods:{updateDomAndSettings:function(t){this.settings.Layout[t]=!this.settings.Layout[t],"dark"===t&&(this.$vuetify.theme.dark=this.settings.Layout[t]),this.$store.commit("updateSettings")},logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.push("/login")})},searchBar:function(){""!==this.searchInput&&this.$router.push({name:"search",query:{q:this.searchInput}})},getPrefs:function(){this.$store.dispatch("fetchSettings")},toggleTheme:function(){var t=this;this.$store.dispatch("toggleTheme").then(function(){t.$vuetify.theme.dark=JSON.parse(t.$store.state.theme)})},saltStatus:function(){var t=this,e=J.methods.fnmatch("salt/job/*"),n=J.methods.fnmatch("salt/job/*/new"),s=J.methods.fnmatch("salt/job/*/ret/*"),a=localStorage.getItem("access"),i=new R["EventSourcePolyfill"]("/api/event_stream/",{headers:{Authorization:"Bearer ".concat(a)}});i.addEventListener("open",function(){t.$store.dispatch("updateWs")}),i.addEventListener("message",function(a){var i=JSON.parse(a.data);if(n(i.tag)&&!0===t.settings.UserSettings.notifs.published)if("saltutil.find_job"!==i.data.fun){i.type="new",i.color="green",i.icon="keyboard_tab",i.link="";var o="";o=i.data.hasOwnProperty("tgt")?i.data.tgt:i.data.minions.length+" minion(s)",i.text=t.$i18n.t("components.core.Layout.Job_")+i.data.fun+t.$i18n.t("components.core.Layout._published for_")+o,t.messages.unshift(i),t.messages.length>t.settings.UserSettings.max_notifs&&t.messages.pop(),t.notif_nb+=1}else{var r=i.data.jid;t.messages.forEach(function(e,n){e.tag===r&&(t.messages.splice(n,1),t.notif_nb-=1)})}else s(i.tag)&&!0===t.settings.UserSettings.notifs.returned?"saltutil.find_job"!==i.data.fun&&(i.type="return",i.color="primary",i.icon="subdirectory_arrow_left",i.text=t.$i18n.t("components.core.Layout.Job_")+i.data.fun+t.$i18n.t("components.core.Layout._returned for_")+i.data.id,i.link="/jobs/"+i.data.jid+"/"+i.data.id,t.messages.unshift(i),t.messages.length>t.settings.UserSettings.max_notifs&&t.messages.pop(),t.notif_nb+=1):e(i.tag)&&!0===t.settings.UserSettings.notifs.event?(i.type="event",i.color="orange",i.icon="more_horiz",i.text=t.$i18n.t("components.core.Layout.JobEvent"),i.link="",t.messages.unshift(i),t.messages.length>t.settings.UserSettings.max_notifs&&t.messages.pop(),t.notif_nb+=1):/^\w{20}$/.test(i.tag)&&!0===t.settings.UserSettings.notifs.created&&(i.type="created",i.color="secondary",i.icon="add",i.text=t.$i18n.t("components.core.Layout.NewJobCreated"),i.link="",t.messages.unshift(i),t.messages.length>t.settings.UserSettings.max_notifs&&t.messages.pop(),t.notif_nb+=1)},!1)}},created:function(){this.getPrefs(),this.saltStatus(),this.$vuetify.theme.dark=this.settings.Layout.dark},computed:Object(A["a"])({},Object(M["b"])({username:function(t){return t.username},email:function(t){return t.email},settings:function(t){return t.settings}}))},P=U,O=(n("355a"),n("2877")),I=Object(O["a"])(P,j,D,!1,null,null,null),F=I.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},N=[],L={name:"SimpleLayout"},K=L,H=Object(O["a"])(K,E,N,!1,null,"0f66a338",null),z=H.exports,B={computed:{layout:function(){return this.$route.meta.plainLayout}},components:{"app-layout":F,"simple-layout":z}},q=B,G=(n("034f"),Object(O["a"])(q,i,o,!1,null,null,null)),V=G.exports,W=(n("d1e78"),n("d4b8"),n("f309")),X=n("2db4"),Y=n("ffa5"),Z=n.n(Y),Q=n("4b41"),tt=n("ea1f"),et=n("e088"),nt=n("2394"),st=n("8066"),at="en",it={en:et,fr:nt,zh:st};s["default"].use(W["a"],{components:{VSnackbar:X["a"],VBtn:u["a"],VIcon:p["a"]}}),s["default"].use(Z.a,{x:"center",y:"bottom",color:"black",icon:"info",iconColor:"",classes:["body-2"],timeout:3e3,dismissable:!0,multiLine:!1,vertical:!1,queueable:!1,showClose:!0,closeText:"",closeColor:"",shorts:{custom:{color:"purple"}},property:"$toast"});var ot=new W["a"]({lang:{locales:{en:Q["a"],fr:tt["a"]},current:at},icons:{iconfont:"md"},theme:{themes:{light:{primary:"#6200EE",secondary:"#03DAC6"},dark:{secondary:"#BB86FC",primary:"#03DAC6"}}}}),rt=n("8c4f"),lt=n("ade3"),ct=n("0e44"),ut=n("bc3a"),dt=n.n(ut);s["default"].use(M["a"]);var mt=new M["a"].Store({plugins:[Object(ct["a"])()],state:{username:"",email:"",id:"",access:"",refresh:"",is_staff:!1,ws_status:!1,settings:{}},mutations:{auth_success:function(t,e){Object.keys(e).forEach(function(n){t[n]=e[n]})},logout:function(t){t.access=""},updateWs:function(t){t.ws_status=!0},setSettings:function(t,e){t.settings=e},updateSettings:function(t){dt.a.patch("api/userssettings/".concat(t.id,"/"),{settings:t.settings}).then(function(){}).catch(function(t){console.log("update settings failed:",t)})}},getters:{isLoggedIn:function(t){return!!t.access},user_id:function(t){return t.id},isStaff:function(t){return t.is_staff},settings:function(t){return t.settings}},actions:{updateWs:function(t){var e=t.commit;e("updateWs")},toggleTheme:function(t){var e=t.commit;e("toggleTheme")},fetchSettings:function(t){dt.a.get("api/userssettings/".concat(t.getters.user_id,"/")).then(function(e){t.commit("setSettings",e.data.settings)}).catch(function(t){console.log(t)})},login:function(t,e){var n=t.commit;return new Promise(function(t,s){dt()({url:"/api/token/",data:e,method:"POST"}).then(function(e){Object.keys(e.data).forEach(function(t){localStorage.setItem(t,e.data[t])}),dt.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.access),n("auth_success",e.data),t(e)}).catch(function(t){localStorage.clear(),s(t)})})},oauthlogin:function(t,e){var n=t.commit;return new Promise(function(t,s){dt()({url:"/api/social/login/",data:e,method:"POST"}).then(function(e){delete Object.assign(e.data,Object(lt["a"])({},"access",e.data["token"]))["token"],Object.keys(e.data).forEach(function(t){localStorage.setItem(t,e.data[t])}),dt.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.access),n("auth_success",e.data),t(e)}).catch(function(t){localStorage.clear(),s(t)})})},logout:function(t){var e=t.commit;return new Promise(function(t){e("logout"),localStorage.clear(),delete dt.a.defaults.headers.common["Authorization"],t()})}}}),ht=n("62ad"),ft=n("a523"),pt=n("0fd9"),gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12",lg:"7"}},[n("ConformityChart")],1),n(ht["a"],{attrs:{sm:"6",lg:"2"}},[n("KeysStatusCard")],1),n(ht["a"],{attrs:{sm:"6",lg:"3"}},[n("AlcaliStatusCard")],1)],1),n(pt["a"],[n(ht["a"],{attrs:{lg:"12"}},[n("JobsChartCard")],1)],1),n(pt["a"],[n(ht["a"],{attrs:{lg:"12"}},[n("JobsTable",{attrs:{filter:{limit:10}}})],1)],1)],1)},bt=[],vt=n("1f4f"),_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.$t("components.KeysStatusCard.keys")))]),n(vt["a"],[n("tbody",t._l(t.keys_status,function(e,s){return n("tr",{key:s},[n("td",{staticClass:"pr-0"},[n(p["a"],[t._v(t._s(t.statusIcon(s)))])],1),n("td",{staticClass:"pl-0"},[t._v(t._s(t.$t("components.KeysStatusCard."+s)))]),n("td",{staticClass:"text-right"},[t._v(t._s(e)+" / "+t._s(t.keys_total))])])}),0)])],1)],1)},yt=[],Ct=(n("13d5"),n("07ac"),{name:"KeysStatusCard",data:function(){return{keys_status:{},keys_total:0}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;this.$http.get("api/keys/keys_status/").then(function(e){t.keys_status=e.data,t.keys_total=Object.values(e.data).reduce(function(t,e){return t+e})})},statusIcon:function(t){switch(t){case"accepted":return"check";case"rejected":return"first_page";case"denied":return"close";case"unaccepted":return"refresh"}}}}),kt=Ct,St=Object(O["a"])(kt,_t,yt,!1,null,"da9ec50e",null),Tt=St.exports,$t=n("b974"),xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],{attrs:{elevation:null==t.minion?2:0}},[n(b["a"],{attrs:{"three-line":"",dense:""}},[n(y["g"],[n(y["k"],{staticClass:"headline mb-1"},[t._v(t._s(t.$t("components.JobsChartCard.Stats")))])],1),n(T["a"]),n(y["g"],{staticClass:"mr-6"},[n($t["a"],{attrs:{items:t.filters,label:t.$t("components.JobsChartCard.Filter")},on:{change:t.updateSettings},model:{value:t.settings.Home.JobsChartCard.filter,callback:function(e){t.$set(t.settings.Home.JobsChartCard,"filter",e)},expression:"settings.Home.JobsChartCard.filter"}})],1),n(y["g"],[n($t["a"],{attrs:{items:t.periods,label:t.$t("components.JobsChartCard.Period")},on:{change:t.updateSettings},model:{value:t.settings.Home.JobsChartCard.period,callback:function(e){t.$set(t.settings.Home.JobsChartCard,"period",e)},expression:"settings.Home.JobsChartCard.period"}})],1)],1),n("canvas",{ref:"chart"})],1)],1)},wt=[],jt=(n("4de4"),n("30ef")),Dt=n.n(jt),At=(n("a9e3"),{afterLayout:function(t){if(t.options.linearGradientLine){var e=t.chart.ctx;t.data.datasets.forEach(function(n){for(var s=Number.MAX_VALUE,a=Number.MIN_VALUE,i=0;i<n.data.length;++i)s>n.data[i]&&(s=n.data[i]),a<n.data[i]&&(a=n.data[i]);var o=t.scales["y-axis-0"],r=o.getPixelForValue(s)||0,l=o.getPixelForValue(a)||0,c=e.createLinearGradient(0,r,0,l);c.addColorStop(0,n.colorStart),c.addColorStop(1,n.colorEnd),n.borderColor=c})}else if(t.options.radialGradientDonut){var n=t.chart.ctx;t.data.datasets.forEach(function(e){var s=(t.chartArea.left+t.chartArea.right)/2,a=(t.chartArea.top+t.chartArea.bottom)/2,i=n.createRadialGradient(s,a,2*t.innerRadius*.2,s,a,2*t.innerRadius);i.addColorStop(0,e.colorStart),i.addColorStop(1,e.colorEnd),e.backgroundColor=i})}}}),Mt=At,Rt={name:"JobsChartCard",props:["minion"],data:function(){return{filters:[{text:this.$i18n.t("components.JobsChartCard.All"),value:"all"},{text:this.$i18n.t("components.JobsChartCard.Highstate"),value:"highstate"},{text:this.$i18n.t("components.JobsChartCard.Other"),value:"other"}],periods:[{text:this.$i18n.t("components.JobsChartCard.Week"),value:7},{text:this.$i18n.t("components.JobsChartCard.TwoWeeks"),value:14},{text:this.$i18n.t("components.JobsChartCard.Month"),value:30},{text:this.$i18n.t("components.JobsChartCard.Year"),value:365}],jobchart:null,selectedFilter:null,selectedPeriod:null,labels:null,chart_data:[]}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}})),mounted:function(){this.createChart()},methods:{updateSettings:function(){this.$store.commit("updateSettings"),this.loadData()},loadData:function(){var t=this,e={params:{fun:this.settings.Home.JobsChartCard.filter,period:this.settings.Home.JobsChartCard.period}};this.minion&&(e.params.id=this.minion),this.$http.get("api/jobs/graph",e).then(function(e){t.jobchart.data.labels=e.data.labels,t.jobchart.data.datasets[0].data=e.data.series[0],t.jobchart.data.datasets[1].data=e.data.series[1],t.jobchart.update()})},createChart:function(){var t=this,e={params:{fun:this.settings.Home.JobsChartCard.filter,period:this.settings.Home.JobsChartCard.period}};this.minion&&(e.params.id=this.minion),null!=this.jobchart&&this.jobchart.destroy(),this.$http.get("api/jobs/graph",e).then(function(e){t.labels=e.data.labels,t.chart_data[0]=e.data.series[0],t.chart_data[1]=e.data.series[1],t.$refs.chart.height=60,t.jobchart=new Dt.a(t.$refs.chart,{type:"line",data:{labels:t.labels,datasets:[{lineTension:.1,pointRadius:1,data:t.chart_data[0],fill:!1,colorStart:"rgba(0, 173, 238, 1.0)",colorEnd:"rgba(231, 18, 143, 1.0)"},{lineTension:.1,pointRadius:1,data:t.chart_data[1],fill:!1,colorStart:"rgba(255, 255, 255, 1.0)",colorEnd:"rgba(255, 0, 0, 1.0)"}]},options:{linearGradientLine:!0,legend:{display:!1},scales:{xAxes:[{gridLines:{display:!0}}],yAxes:[{gridLines:{display:!0},ticks:{autoSkip:!0,beginAtZero:!0,maxTicksLimit:6}}]},responsive:!0},plugins:[Mt]})})}}},Jt=Rt,Ut=(n("8520"),Object(O["a"])(Jt,xt,wt,!1,null,"66ffb98c",null)),Pt=Ut.exports,Ot=n("cc20"),It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.$t("components.AlcaliStatusCard.Status")))]),n(vt["a"],[n("tbody",[n("tr",[n("td",[t._v(t._s(t.$t("components.KeysStatusCard.saltWebsocket")))]),n("td",{staticClass:"text-right"},[n(Ot["a"],{attrs:{color:t.wsStatus?"green":"red","text-color":"white"}},[t._v(" "+t._s(t.wsStatus?t.$t("components.AlcaliStatusCard.OK"):t.$t("components.AlcaliStatusCard.NOT_OK"))+" ")])],1)]),t._l(t.stats,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(t.$t("components.AlcaliStatusCard."+s)))]),n("td",{staticClass:"text-right"},[t._v(t._s(e))])])})],2)])],1)],1)},Ft=[],Et={name:"AlcaliStatusCard",mixins:[J],data:function(){return{stats:{}}},mounted:function(){this.loadData()},computed:{wsStatus:function(){return this.$store.state.ws_status}},methods:{loadData:function(){var t=this;this.$http.get("api/stats/").then(function(e){return t.stats=e.data})}}},Nt=Et,Lt=Object(O["a"])(Nt,It,Ft,!1,null,"43825a7e",null),Kt=Lt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.$t("components.ConformityChart.conformity")))]),n(m["d"],[n(ft["a"],{attrs:{fluid:""}},[t._l(t.conformitynames,function(e){return[n(pt["a"],{key:e,attrs:{"no-gutters":"",align:"center",justify:"center"}},[n(ht["a"],{attrs:{sm:"2"}},[t._v(t._s(e))]),n(ht["a"],{attrs:{sm:"10"}},[n(k["a"],{attrs:{"open-on-hover":"","max-width":"250px"},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[n("canvas",t._g({ref:e,refInFor:!0,attrs:{height:"15"}},a))]}}],null,!0)},[n(vt["a"],{attrs:{dense:""}},[n("thead",[n("tr",[n("th",[t._v(t._s(e))])])]),n("tbody",{domProps:{innerHTML:t._s(t.customTool)}})])],1)],1)],1)]})],2)],1)],1)],1)},zt=[],Bt=(n("b0c0"),n("d81d"),n("02d0"),n("fcf4")),qt={name:"ConformityChart",data:function(){return{conformitynames:null,confchart:null,conformity:null,customTool:""}},created:function(){},mounted:function(){this.loadConformity()},methods:{loadConformity:function(){var t=this;this.$http.get("api/minions/conformity/").then(function(e){t.conformity=e.data.data,t.conformitynames=e.data.name}).then(function(){t.conformity.forEach(function(e,n){var s={labels:[t.conformitynames[n]],datasets:[]};Object.keys(e).forEach(function(n){var a="";if(["conflict","false"].indexOf(n)>=0)a="#F44336";else if(["conform","true"].indexOf(n)>=0)a="#41f40e";else if(["None","unknown","null"].indexOf(n)>=0)a=t.$vuetify.theme.themes.light.primary;else{var i=Object.keys(Bt["a"]);a=Bt["a"][i[i.length*Math.random()<<0]].darken2}s.datasets.push({label:n,data:[e[n]],backgroundColor:a})}),new Dt.a(t.$refs[t.conformitynames[n]],{type:"horizontalBar",data:s,options:{animation:!1,plugins:{stacked100:{enable:!0}},tooltips:{enabled:!1,mode:"index",intersect:!1,custom:function(e){if(e&&e.body){var n=e.body.map(function(t){return t.lines}),s="";n.forEach(function(t,n){var a=e.labelColors[n],i="background:"+a.backgroundColor;i+="; border-color:"+a.borderColor,i+="; border-width: 2px";var o='<span class="chartjs-tooltip-key" style="'.concat(i,'">__</span>');s+="<tr><td>"+o+"  "+t+"</td></tr>"}),t.customTool=s}}},legend:{display:!1},scales:{xAxes:[{stacked:!0,display:!1,gridLines:{display:!1,drawTicks:!1,drawBorder:!1},ticks:{display:!1,padding:-20}}],yAxes:[{stacked:!0,display:!1,ticks:{display:!1,padding:-20},gridLines:{drawTicks:!1,display:!1,drawBorder:!1}}]}}})})})}}},Gt=qt,Vt=(n("168d"),Object(O["a"])(Gt,Ht,zt,!1,null,"56988c53",null)),Wt=Vt.exports,Xt=n("c6a6"),Yt=n("8fea"),Zt=n("2e4b"),Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[null==t.filter?n(pt["a"],{attrs:{"no-gutters":""}},[n(ht["a"],{attrs:{sm:"12"}},[n(d["a"],{staticClass:"mb-8"},[n(pt["a"],[n(ht["a"],{attrs:{lg:"2"}},[n(m["e"],[t._v(t._s(t.$t("components.JobsTable.SearchJobs")))])],1),n(ht["a"],{attrs:{lg:"2","offset-lg":"2"}},[n(k["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.selectedDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.selectedDate=e},"update:return-value":function(e){t.selectedDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n($["a"],t._g({attrs:{label:t.$t("components.JobsTable.SelectDate"),readonly:""},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},s))]}}],null,!1,786966308),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[n(Zt["a"],{attrs:{max:(new Date).toISOString().split("T")[0],reactive:"","no-title":"",range:""},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}},[n("div",{staticClass:"flex-grow-1"}),n(u["a"],{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(t._s(t.$t("components.JobsTable.Cancel")))]),n(u["a"],{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.selectedDate)}}},[t._v("OK")])],1)],1)],1),n(ht["a"],{attrs:{lg:"2"}},[n(Xt["a"],{attrs:{items:t.users,label:t.$t("components.JobsTable.User"),multiple:"","single-line":""},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.item,a=e.index;return[0===a?n("span",[t._v(t._s(s))]):t._e(),1===a?n("span",{staticClass:"grey--text caption"},[t._v(" (+"+t._s(t.selectedUsers.length-1)+" others)")]):t._e()]}}],null,!1,2591977476),model:{value:t.selectedUsers,callback:function(e){t.selectedUsers=e},expression:"selectedUsers"}})],1),n(ht["a"],{attrs:{lg:"2"}},[n(Xt["a"],{attrs:{items:t.minions,label:t.$t("components.JobsTable.Target"),multiple:"","single-line":""},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.item,a=e.index;return[0===a?n("span",[t._v(t._s(s))]):t._e(),1===a?n("span",{staticClass:"grey--text caption"},[t._v(" (+"+t._s(t.selectedTarget.length-1)+" others)")]):t._e()]}}],null,!1,3190666039),model:{value:t.selectedTarget,callback:function(e){t.selectedTarget=e},expression:"selectedTarget"}})],1),n(ht["a"],{attrs:{lg:"1"}},[n($t["a"],{attrs:{items:t.limit,label:t.$t("components.JobsTable.Limit"),"single-line":""},model:{value:t.selectedLimit,callback:function(e){t.selectedLimit=e},expression:"selectedLimit"}})],1),n(ht["a"],{attrs:{lg:"1","align-self":"center"}},[n("div",{staticClass:"text-center"},[n(u["a"],{attrs:{color:"primary"},on:{click:t.filterJobs}},[t._v(t._s(t.$t("common.Search"))+" ")])],1)])],1)],1)],1)],1):t._e(),n(pt["a"],{attrs:{"no-gutters":""}},[n(ht["a"],{attrs:{sm:"12"}},[n(d["a"],{attrs:{elevation:null==t.filter||t.filter.hasOwnProperty("limit")?2:0}},[n(m["e"],[t._v(" "+t._s(t.$t("components.JobsTable.Job"))+" "),n(T["a"]),n($["a"],{staticClass:"search",attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.JobsTable.table.sortBy,"sort-desc":t.settings.JobsTable.table.sortDesc,"items-per-page":t.settings.JobsTable.table.itemsPerPage,"item-key":"uniqueid",headers:t.filteredHeaders,items:t.indexedItems,search:t.search,loading:t.loading},on:{"update:sortBy":function(e){return t.$set(t.settings.JobsTable.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.JobsTable.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.JobsTable.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.JobsTable.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.JobsTable.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.JobsTable.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"item.jid",fn:function(e){var s=e.item;return[n(u["a"],{staticClass:"text-none",attrs:{text:"",small:"",to:"/jobs/"+s.jid+"/"+s.id}},[t._v(t._s(s.jid))])]}},{key:"item.id",fn:function(e){var s=e.item;return[n(u["a"],{directives:[{name:"show",rawName:"v-show",value:!t.filter||t.filter.hasOwnProperty("limit"),expression:"!filter || filter.hasOwnProperty('limit')"}],staticClass:"text-none",attrs:{text:"",small:"",to:"/minions/"+s.id}},[t._v(t._s(s.id))])]}},{key:"item.arguments",fn:function(e){var n=e.item;return[t._v(" "+t._s(n.arguments.length>20?n.arguments.slice(0,20)+"...":n.arguments)+" ")]}},{key:"item.keyword_arguments",fn:function(e){var n=e.item;return[t._v(" "+t._s(n.keyword_arguments.length>20?n.keyword_arguments.slice(0,20)+"...":n.keyword_arguments)+" ")]}},{key:"item.success",fn:function(e){var s=e.item;return[n(Ot["a"],{attrs:{color:t.boolRepr(s.success),dark:""}},[t._v(t._s(t.boolText(s.success)))])]}},{key:"item.alter_time",fn:function(e){var n=e.item;return[t._v(" "+t._s(new Date(n.alter_time).toLocaleString("en-GB"))+" ")]}},{key:"item.action",fn:function(e){var s=e.item;return[n("div",{staticClass:"text-center"},[n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"blue",tile:"",dark:"",to:"/jobs/"+s.jid+"/"+s.id}},[t._v(" "+t._s(t.$t("components.JobsTable.Detail"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"blue-grey",tile:"",dark:"",to:"/run?tgt="+s.id+"&fun="+s.fun+"&arg="+s.arguments+"&kwarg="+s.keyword_arguments}},[t._v(" "+t._s(t.$t("components.JobsTable.Rerun"))+" ")])],1)]}}])})],1)],1)],1)],1)},te=[],ee=(n("a15b"),{name:"JobsTable",props:["filter","jid"],data:function(){return{menu:!1,limit:[50,100,200,500,1e3],selectedDate:[],selectedLimit:null,selectedUsers:null,selectedTarget:null,minions:[],users:[],search:"",headers:[{text:this.$t("components.JobsTable.JID"),value:"jid"},{text:this.$t("components.JobsTable.Target"),value:"id"},{text:this.$t("components.JobsTable.Function"),value:"fun"},{text:this.$t("components.JobsTable.Arguments"),value:"arguments"},{text:this.$t("components.JobsTable.KeywordArguments"),value:"keyword_arguments"},{text:this.$t("components.JobsTable.User"),value:"user"},{text:this.$t("components.JobsTable.Status"),value:"success"},{text:this.$t("components.JobsTable.Date"),value:"alter_time"},{text:this.$t("components.JobsTable.Action"),value:"action",sortable:!1}],jobs:[],loading:!0}},computed:Object(A["a"])({indexedItems:function(){return this.jobs.map(function(t,e){return Object(A["a"])({uniqueid:e},t)})},dateRangeText:function(){return this.selectedDate.join(" ~ ")},filteredHeaders:function(){if(this.filter&&this.filter.hasOwnProperty("target[]")){var t=this.headers;return"id"===t[1].value&&t.splice(1,1),t}return this.headers}},Object(M["b"])({settings:function(t){return t.settings}})),mounted:function(){this.loadData()},methods:{updateSettings:function(){this.$store.commit("updateSettings")},loadData:function(){var t=this;this.$http.get("api/jobs/filters/").then(function(e){t.minions=e.data.minions,t.users=e.data.users}),this.jid?this.$http.get("api/jobs/".concat(this.jid)).then(function(e){t.jobs=e.data,t.loading=!1}):this.$http.get("api/jobs/",{params:this.filter}).then(function(e){t.jobs=e.data,t.loading=!1})},filterJobs:function(){var t=this;this.loading=!0;var e={limit:this.selectedLimit,target:this.selectedTarget,users:this.selectedUsers};this.selectedDate.length>0&&(e.start=this.selectedDate[0],e.end=this.selectedDate[1]||this.selectedDate[0]),this.$http.get("api/jobs/",{params:e}).then(function(e){t.jobs=e.data,t.loading=!1,t.selectedUsers=t.selectedTarget=t.selectedLimit=t.selectedDate=null,t.selectedDate=[]})},boolRepr:function(t){return!0===t?"green":"red"},boolText:function(t){return!0===t?this.$i18n.t("components.JobsTable.Success"):this.$i18n.t("components.JobsTable.Failed")}}}),ne=ee,se=Object(O["a"])(ne,Qt,te,!1,null,"6cbd2e39",null),ae=se.exports,ie={name:"home",components:{JobsTable:ae,ConformityChart:Wt,AlcaliStatusCard:Kt,KeysStatusCard:Tt,JobsChartCard:Pt}},oe=ie,re=Object(O["a"])(oe,gt,bt,!1,null,null,null),le=re.exports,ce=n("4bd4"),ue=n("adda"),de=n("71d9"),me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(a["a"],{attrs:{id:"inspire"}},[s(C["a"],[s(ft["a"],{staticClass:"fill-height",attrs:{fluid:""}},[s(pt["a"],{attrs:{align:"center",justify:"center"}},[s(ht["a"],{attrs:{cols:"12",sm:"8",lg:"4"}},[s(ue["a"],{staticClass:"elevation-0",staticStyle:{float:"right"},attrs:{src:n("4ffd"),width:"100","aspect-ratio":"1"}}),s("h2",{staticClass:"text-center font-weight-black display-4 mb-8"},[t._v("ALCALI")]),s(d["a"],{staticClass:"elevation-12"},[s(de["a"],{attrs:{color:"black",dark:"",flat:""}},[s(x["c"],[t._v(t._s(t.$t("views.Login.LoginTitle")))]),s(T["a"])],1),s(ce["a"],{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.authenticate.apply(null,arguments)}}},[s(m["d"],[s($["a"],{attrs:{label:t.$t("views.Login.Login"),name:"login","prepend-icon":"person",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s($["a"],{attrs:{label:t.$t("views.Login.Password"),name:"password","prepend-icon":"lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s(m["b"],[s(T["a"]),s(u["a"],{attrs:{color:"primary",dark:""},on:{click:function(e){return e.preventDefault(),t.authenticate.apply(null,arguments)}}},[t._v(t._s(t.$t("views.Login.SignIn")))])],1)],1)],1)],1),s(ht["a"],{attrs:{sm:"12",align:"center"}},[s(u["a"],{attrs:{disabled:!t.isInit},on:{click:t.handleClickGetAuth}},[t._v(t._s(t.$t("views.Login.SignIn"))+" "),s("span",{staticClass:"ml-2"},[s("GoogleLogo")],1)])],1)],1)],1)],1)],1)},he=[],fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 48 48"}},[n("g",[n("path",{attrs:{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}}),n("path",{attrs:{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}}),n("path",{attrs:{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}}),n("path",{attrs:{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}}),n("path",{attrs:{fill:"none",d:"M0 0h48v48H0z"}})])])},pe=[],ge={name:"GoogleLogo"},be=ge,ve=Object(O["a"])(be,fe,pe,!1,null,null,null),_e=ve.exports,ye=n("c9bf"),Ce={name:"Login",components:{GoogleLogo:_e},data:function(){return{username:null,password:null,isInit:!1,isSignIn:!1,provider:null,clientId:null,redirectUri:null}},methods:{authenticate:function(){var t=this,e=this.username,n=this.password;this.$store.dispatch("login",{username:e,password:n}).then(function(){return t.$router.push("/")}).catch(function(){t.$toast.error(t.$t("views.Login.InvalidCredentials"))})},handleClickGetAuth:function(){var t=this;this.$gAuth.getAuthCode().then(function(e){var n=new FormData;n.set("provider",t.provider),n.set("code",e),n.set("redirect_uri",t.redirectUri),t.$store.dispatch("oauthlogin",n).then(function(){return t.$router.push("/")}).catch(function(){t.$toast.error(t.$t("views.Login.Unauthorized"))})}).catch(function(){t.$toast.error(t.$t("views.Login.Unauthorized"))})}},mounted:function(){var t=this;this.$http.get("api/social/").then(function(e){t.provider=e.data.provider,t.clientId=e.data.client_id,t.redirectUri=e.data.redirect_uri;var n={clientId:t.clientId,scope:"profile email",prompt:"select_account"};s["default"].use(ye["a"],n);var a=setInterval(function(){t.isInit=t.$gAuth.isInit,t.isSignIn=t.$gAuth.isAuthorized,t.isInit&&clearInterval(a)},1e3)})}},ke=Ce,Se=(n("ef12"),Object(O["a"])(ke,me,he,!1,null,"3143fe97",null)),Te=Se.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12",cols:"12"}},[n("JobsTable",{attrs:{jid:t.jid}})],1)],1)],1)},xe=[],we={name:"Jobs",props:["jid"],components:{JobsTable:ae}},je=we,De=Object(O["a"])(je,$e,xe,!1,null,"e367ce5e",null),Ae=De.exports,Me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n("KeysTable",{key:t.refreshKey})],1)],1),t.fabs?n("Fab",{attrs:{fabs:t.fabs},on:{fab_action:t.fabAction}}):t._e()],1)},Re=[],Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("components.KeysTable.Keys"))+" "),n(T["a"]),n($["a"],{staticClass:"search",attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.KeysTable.table.sortBy,"sort-desc":t.settings.KeysTable.table.sortDesc,"items-per-page":t.settings.KeysTable.table.itemsPerPage,headers:t.headers,items:t.keys,search:t.search,loading:t.loading},on:{"update:sortBy":function(e){return t.$set(t.settings.KeysTable.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.KeysTable.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.KeysTable.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.KeysTable.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.KeysTable.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.KeysTable.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"item.minion_id",fn:function(e){var s=e.item;return["accepted"===s.status?[n(u["a"],{staticClass:"text-none",attrs:{text:"",small:"",to:"/minions/"+s.minion_id}},[t._v(t._s(s.minion_id))])]:[t._v(" "+t._s(s.minion_id)+" ")]]}},{key:"item.status",fn:function(e){var s=e.item;return[n(Ot["a"],{attrs:{color:t.keysRepr(s.status),dark:""}},[t._v(t._s(t.$t("components.KeysTable."+s.status.toString())))])]}},{key:"item.action",fn:function(e){var s=e.item;return[t._l(t.keyAction(s.status),function(e){return[n(u["a"],{key:e,staticClass:"ma-2",attrs:{small:"",dark:"",color:t.keysRepr(e)},on:{click:function(n){return t.manageKey(e,s.minion_id)}}},[t._v(" "+t._s(t.$t("components.KeysTable."+e))+" ")])]})]}}])})],1)],1)},Ue=[],Pe=(n("ddb0"),n("2ca0"),{name:"KeysTable",data:function(){return{search:"",headers:[{text:this.$t("components.KeysTable.MinionId"),value:"minion_id"},{text:this.$t("components.KeysTable.Status"),value:"status"},{text:this.$t("components.KeysTable.PublicKey"),value:"pub"},{text:this.$t("components.KeysTable.Actions"),value:"action",sortable:!1}],keys:[],loading:!0}},mounted:function(){this.loadData()},methods:{updateSettings:function(){this.$store.commit("updateSettings")},loadData:function(){var t=this;this.$http.get("api/keys/").then(function(e){t.keys=e.data,t.loading=!1})},sleep:function(t){return new Promise(function(e){return setTimeout(e,t)})},keysRepr:function(t){return t.startsWith("accept")?"green":t.startsWith("reject")?"orange":t.startsWith("de")?"red":"grey"},keyAction:function(t){return"accepted"===t?["reject","delete"]:"rejected"===t?["accept","delete"]:"denied"===t?["accept"]:["accept","delete"]},manageKey:function(t,e){var n=this,s=new FormData;s.set("action",t),s.set("target",e),this.$http.post("api/keys/manage_keys/",s).then(function(t){n.$toast(t.data.result)}).catch(function(t){n.$toast.error(t.response.data)}),this.sleep(2e3).then(function(){n.loadData()})}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}}))}),Oe=Pe,Ie=Object(O["a"])(Oe,Je,Ue,!1,null,"66de333d",null),Fe=Ie.exports,Ee=n("c73b"),Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(Ee["a"],{attrs:{fixed:"",bottom:"",right:"",direction:"top",transition:"slide-y-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function(){return[n(u["a"],{attrs:{color:"primary",fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?n(p["a"],[t._v("close")]):n(p["a"],[t._v("menu")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t._l(t.fabs,function(e){return[n(w["a"],{key:e.tooltip,attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on;return[n(u["a"],t._g({attrs:{fab:"",dark:"",small:"",color:e.color},on:{click:function(n){return t.emit("fab_action",e.action)}}},a),[n(p["a"],[t._v(t._s(e.icon))])],1)]}}],null,!0)},[n("span",[t._v(t._s(e.tooltip))])])]})],2)},Le=[],Ke={name:"Fab",props:["fabs"],methods:{emit:function(t,e){this.$emit(t,e)}},data:function(){return{fab:!1}}},He=Ke,ze=Object(O["a"])(He,Ne,Le,!1,null,"56c34fbd",null),Be=ze.exports,qe={name:"Keys",components:{Fab:Be,KeysTable:Fe},data:function(){return{fabs:[{color:"pink",action:"refreshKeys",icon:"refresh",tooltip:this.$i18n.t("components.Keys.Refresh")},{color:"orange",action:"rejectAll",icon:"close",tooltip:this.$i18n.t("components.Keys.RejectAll")},{color:"green",action:"acceptAll",icon:"done",tooltip:this.$i18n.t("components.Keys.AcceptAll")}],refreshKey:0}},methods:{fabAction:function(t){this[t]()},refreshKeys:function(){var t=this;this.$toast(this.$i18n.t("components.Keys.RefreshingKeys")),this.$http.post("/api/keys/refresh/").then(function(e){t.$toast(t.$i18n.t("components.Keys.KeysRefreshed"))}).then(function(){t.refreshKey+=1}).catch(function(e){t.$toast.error(e.response.data)})},acceptAll:function(){var t=this,e=new FormData;e.set("action","accept"),e.set("target","*"),this.$http.post("api/keys/manage_keys/",e).then(function(e){t.$toast(e.data.result)}).then(function(){t.refreshKey+=1}).catch(function(e){t.$toast.error(e.response.data)})},rejectAll:function(){var t=this,e=new FormData;e.set("action","reject"),e.set("target","*"),this.$http.post("api/keys/manage_keys/",e).then(function(e){t.$toast(e.data.result)}).then(function(){t.refreshKey+=1}).catch(function(e){t.$toast.error(e.response.data)})}}},Ge=qe,Ve=Object(O["a"])(Ge,Me,Re,!1,null,"f28196ea",null),We=Ve.exports,Xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12",cols:"12"}},[n("MinionsTable",{key:t.refreshKey}),t.fabs?n("Fab",{attrs:{fabs:t.fabs},on:{fab_action:t.fabAction}}):t._e()],1)],1)],1)},Ye=[],Ze=n("ac7c"),Qe=n("169a"),tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("components.MinionsTable.Minion"))+" "),n(T["a"]),n(k["a"],{attrs:{"close-on-content-click":!1,"offset-y":"","offset-x":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n(u["a"],t._g({staticClass:"mr-5",attrs:{color:"primary",dark:""}},s),[t._v(" "+t._s(t.$t("components.MinionsTable.Column"))+" ")])]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[n(d["a"],{attrs:{flat:"","max-width":"700"}},[n(m["d"],[n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],{attrs:{"no-gutters":""}},[t._l(t.available_headers,function(e,s){return[n(ht["a"],{key:s,attrs:{cols:"4"}},[n(Ze["a"],{attrs:{label:e,value:e,"hide-details":""},on:{change:t.updateSettings},model:{value:t.settings.MinionsTable.table.columns,callback:function(e){t.$set(t.settings.MinionsTable.table,"columns",e)},expression:"settings.MinionsTable.table.columns"}})],1)]})],2)],1)],1)],1)],1),n($["a"],{staticClass:"search",attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.MinionsTable.table.sortBy,headers:t.customHeaders,"sort-desc":t.settings.MinionsTable.table.sortDesc,items:t.minions,"items-per-page":t.settings.MinionsTable.table.itemsPerPage,search:t.search,loading:t.loading,"loading-text":"Loading... Please wait"},on:{"update:sortBy":function(e){return t.$set(t.settings.MinionsTable.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.MinionsTable.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.MinionsTable.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.MinionsTable.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.MinionsTable.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.MinionsTable.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"item.minion_id",fn:function(e){var s=e.item;return[n(u["a"],{staticClass:"text-none",attrs:{text:"",small:"",to:"/minions/"+s.minion_id}},[t._v(t._s(s.minion_id))])]}},{key:"item.conformity",fn:function(e){var s=e.item;return[n(Ot["a"],{attrs:{color:t.boolRepr(s.conformity),dark:"",to:"/conformity/"+s.minion_id}},[t._v(t._s(t.$t("components.ConformityTable."+s.conformity))+" ")])]}},{key:"item.last_job",fn:function(e){var n=e.item;return[t._v(" "+t._s(null===n.last_job?"":new Date(n.last_job).toLocaleString("en-GB"))+" ")]}},{key:"item.last_highstate",fn:function(e){var n=e.item;return[t._v(" "+t._s(null===n.last_highstate?"":new Date(n.last_highstate).toLocaleString("en-GB"))+" ")]}},{key:"item.action",fn:function(e){var s=e.item;return[n("div",{staticClass:"text-center"},[n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"blue",tile:"",dark:""},on:{click:function(e){return t.refreshMinion(s.minion_id)}}},[t._v(" "+t._s(t.$t("components.MinionsTable.Refresh"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"purple",tile:"",dark:"",to:"/minions/"+s.minion_id}},[t._v(" "+t._s(t.$t("components.MinionsTable.Detail"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"blue-grey",tile:"",dark:"",to:"/run?tgt="+s.minion_id}},[t._v(" "+t._s(t.$t("components.MinionsTable.Run"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"red",tile:"",dark:""},on:{click:function(e){return e.stopPropagation(),t.showDialog(s.minion_id)}}},[t._v(" "+t._s(t.$t("components.MinionsTable.Delete"))+" ")])],1)]}}])})],1),n("div",{staticClass:"text-center"},[n(Qe["a"],{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n(d["a"],[n(m["e"],{staticClass:"headline red",attrs:{"primary-title":""}},[t._v(" "+t._s(t.$t("components.MinionsTable.Delete"))+" "+t._s(t.target)+" ? ")]),n(m["d"],[n("br"),t._v(" "+t._s(t.$t("components.MinionsTable.Msg1"))+t._s(t.target)+t._s(t.$t("components.MinionsTable.Msg2"))+" ")]),n(h["a"]),n(m["b"],[n(T["a"]),n(u["a"],{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" "+t._s(t.$t("components.MinionsTable.Close"))+" ")]),n(u["a"],{attrs:{color:"red",text:""},on:{click:function(e){return t.deleteMinion(t.target)}}},[t._v(" "+t._s(t.$t("components.MinionsTable.Delete"))+" ")])],1)],1)],1)],1)],1)},en=[],nn=(n("99af"),{name:"MinionsTable",data:function(){return{search:"",dialog:!1,default_headers:["minion_id","conformity","fqdn","os","oscodename","kernelrelease","last_job","last_highstate"],unwanted_headers:["pillar","grain","id"],available_headers:[],minions:[],menu:!1,target:null,loading:!0}},computed:Object(A["a"])({customHeaders:function(){var t=[];return this.settings.MinionsTable.table.columns.forEach(function(e){var n=e.split("_").map(function(t){return t.replace(/^\w/,function(t){return t.toUpperCase()})}).join(" ");t.push({text:n,value:e})}),t.push({text:"Actions",value:"action",sortable:!1}),t}},Object(M["b"])({settings:function(t){return t.settings}})),mounted:function(){this.loadData()},methods:{updateSettings:function(){this.$store.commit("updateSettings")},loadData:function(){var t=this;this.$http.get("api/minions/").then(function(e){function n(t){return t.forEach(function(t){var e=JSON.parse(t.grain);for(var n in e)t[n]=e[n]}),t}t.minions=n(e.data),t.loading=!1,t.available_headers=t.available_headers.concat(t.default_headers),t.minions.length>0&&Object.keys(t.minions[0]).forEach(function(e){"string"!==typeof t.minions[0][e]||t.default_headers.includes(e)||t.unwanted_headers.includes(e)||e.startsWith("lsb")||t.available_headers.push(e)})})},boolRepr:function(t){return"True"===t?"green":"False"===t?"red":"primary"},refreshMinion:function(t){var e=this;this.$toast(this.$i18n.t("components.MinionsTable.Refreshing")+t);var n=new FormData;n.set("minion_id",t),this.$http.post("/api/minions/refresh_minions/",n).then(function(t){e.$toast(t.data.result)}).catch(function(t){e.$toast.error(t.response.data)})},deleteMinion:function(t){var e=this;this.dialog=!1,this.$http.delete("/api/minions/".concat(t,"/")).then(function(){e.minions.splice(e.minions.indexOf(t),1),e.$toast(t+e.$i18n.t("components.MinionsTable.Deleted"))}).catch(function(t){e.$toast.error(t.response.data)})},showDialog:function(t){this.target=t,this.dialog=!0}}}),sn=nn,an=Object(O["a"])(sn,tn,en,!1,null,"2837a6b8",null),on=an.exports,rn={name:"Minions",components:{Fab:Be,MinionsTable:on},data:function(){return{refreshKey:0,fabs:[{color:"pink",action:"refreshMinions",icon:"refresh",tooltip:this.$i18n.t("components.Minions.RefreshAll")},{color:"orange",action:"runAll",icon:"playlist_play",tooltip:this.$i18n.t("components.Minions.JobAll")}]}},methods:{fabAction:function(t){this[t]()},refreshMinions:function(){var t=this;this.$toast(this.$i18n.t("components.Minions.Refreshing")),this.$http.post("/api/minions/refresh_minions/").then(function(e){t.$toast(t.$i18n.t("components.Minions.NbMinionsRefreshed",[e.data.refreshed.length]))}).then(function(){t.refreshKey+=1}).catch(function(e){t.$toast.error(e.response.data)})},runAll:function(){this.$router.push("/run?tgt=*")}}},ln=rn,cn=Object(O["a"])(ln,Xe,Ye,!1,null,"7bfde693",null),un=cn.exports,dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12",lg:"3"}},[null!==t.minion?n("InfosCard",{attrs:{minion:t.minion}}):t._e(),null!==t.minion?n("NetworkCard",{attrs:{minion:t.minion}}):t._e()],1),n(ht["a"],{attrs:{sm:"12",lg:"9"}},[null!==t.minion?n("MinionDetailCard",{attrs:{minion:t.minion}}):t._e()],1),t.fabs?n("Fab",{attrs:{fabs:t.fabs},on:{fab_action:t.fabAction}}):t._e()],1)],1)},mn=[],hn=n("71a3"),fn=n("c671"),pn=n("fe57"),gn=n("aac8"),bn=n("9a96"),vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.minion.id))]),n(pn["a"],{on:{change:t.updateSettings},model:{value:t.settings.MinionDetail.InfosCard.tab,callback:function(e){t.$set(t.settings.MinionDetail.InfosCard,"tab",e)},expression:"settings.MinionDetail.InfosCard.tab"}},[n(bn["a"]),n(hn["a"],{attrs:{href:"#common"}},[t._v(" "+t._s(t.$t("components.InfosCard.Common"))+" ")]),n(hn["a"],{attrs:{href:"#salt"}},[t._v(" "+t._s(t.$t("components.InfosCard.Salt"))+" ")]),n(hn["a"],{attrs:{href:"#hardware"}},[t._v(" "+t._s(t.$t("components.InfosCard.Hardware"))+" ")])],1),n(gn["a"],{model:{value:t.settings.MinionDetail.InfosCard.tab,callback:function(e){t.$set(t.settings.MinionDetail.InfosCard,"tab",e)},expression:"settings.MinionDetail.InfosCard.tab"}},[n(fn["a"],{attrs:{id:"common"}},[n(vt["a"],[n("tbody",t._l(t.common,function(e){return n("tr",{key:e.name},[n("td",[t._v(t._s(t.$t(e.name)))]),"last_job"===e.grain||"last_highstate"===e.grain&&null!==t.minion[e.grain]?n("td",{staticClass:"text-right"},[t._v(" "+t._s(new Date(t.minion[e.grain]).toLocaleString("en-GB"))+" ")]):"conformity"===e.grain?n("td",{staticClass:"text-right"},[n(Ot["a"],{attrs:{color:t.boolRepr(t.minion[e.grain]),dark:""}},[t._v(t._s(null==t.minion[e.grain]?"unknown":t.minion[e.grain]))])],1):n("td",{staticClass:"text-right"},[t._v(t._s(t.minion[e.grain]))])])}),0)])],1),n(fn["a"],{attrs:{id:"salt"}},[n(vt["a"],[n("tbody",t._l(t.salt,function(e){return n("tr",{key:e.name},[n("td",[t._v(t._s(e.name))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.minion[e.grain]))])])}),0)])],1),n(fn["a"],{attrs:{id:"hardware"}},[n(vt["a"],[n("tbody",t._l(t.hardware,function(e){return n("tr",{key:e.name},[n("td",[t._v(t._s(e.name))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.minion[e.grain]))])])}),0)])],1)],1)],1)],1)},_n=[],yn={name:"InfosCard",data:function(){return{common:[{name:"F.Q.D.N",grain:"fqdn"},{name:"O.S",grain:"os"},{name:"O.S Version",grain:"oscodename"},{name:"Kernel",grain:"kernelrelease"},{name:"Last Job",grain:"last_job"},{name:"Last Highstate",grain:"last_highstate"},{name:"Highstate Conformity",grain:"conformity"}],salt:[{name:"ID",grain:"id"},{name:"Master",grain:"master"},{name:"Salt Version",grain:"saltversion"},{name:"Salt Path",grain:"saltpath"},{name:"Python Version",grain:"pythonversion"}],hardware:[{name:"C.P.U Model",grain:"cpu_model"},{name:"Number of C.P.U",grain:"num_cpus"},{name:"Total Memory",grain:"mem_total"},{name:"Total Swap",grain:"swap_total"},{name:"Virtual",grain:"virtual"}]}},props:["minion"],methods:{boolRepr:function(t){return"True"===t?"green":"False"===t?"red":"primary"},updateSettings:function(){this.$store.commit("updateSettings")}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}}))},Cn=yn,kn=Object(O["a"])(Cn,vn,_n,!1,null,"7597001d",null),Sn=kn.exports,Tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.$t("components.NetworkCard.Network")))]),n(pn["a"],{on:{change:t.updateSettings},model:{value:t.settings.MinionDetail.NetworkCard.tab,callback:function(e){t.$set(t.settings.MinionDetail.NetworkCard,"tab",e)},expression:"settings.MinionDetail.NetworkCard.tab"}},[n(bn["a"]),n(hn["a"],{attrs:{href:"#interface"}},[t._v(" "+t._s(t.$t("components.NetworkCard.Interface"))+" ")]),n(hn["a"],{attrs:{href:"#mac"}},[t._v(" "+t._s(t.$t("components.NetworkCard.MAC"))+" ")]),n(hn["a"],{attrs:{href:"#dns"}},[t._v(" "+t._s(t.$t("components.NetworkCard.DNS"))+" ")])],1),n(gn["a"],{model:{value:t.settings.MinionDetail.NetworkCard.tab,callback:function(e){t.$set(t.settings.MinionDetail.NetworkCard,"tab",e)},expression:"settings.MinionDetail.NetworkCard.tab"}},[n(fn["a"],{attrs:{id:"interface"}},[n(vt["a"],[n("tbody",[t._l(t.minion.ip_interfaces,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(s))]),t._l(e,function(e,s){return n("td",{key:s,staticClass:"text-right"},[t._v(t._s(e))])})],2)}),n("tr",[n("td",[t._v(t._s(t.$t("components.NetworkCard.IPV4Gateway")))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.minion.ip4_gw))])]),n("tr",[n("td",[t._v(t._s(t.$t("components.NetworkCard.IPV6Gateway")))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.minion.ip6_gw))])])],2)])],1),n(fn["a"],{attrs:{id:"mac"}},[n(vt["a"],[n("tbody",t._l(t.minion.hwaddr_interfaces,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(s))]),n("td",{staticClass:"text-right"},[t._v(t._s(e))])])}),0)])],1),n(fn["a"],{attrs:{id:"dns"}},[n(vt["a"],[n("tbody",t._l(t.minion.dns,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(s))]),n("td",{staticClass:"text-right"},[t._v(t._s(e.length>=1?e:""))])])}),0)])],1)],1)],1)],1)},$n=[],xn={name:"NetworkCard",data:function(){return{tab:null,tabs:3}},props:["minion"],methods:{updateSettings:function(){this.$store.commit("updateSettings")}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}}))},wn=xn,jn=Object(O["a"])(wn,Tn,$n,!1,null,"73be90c3",null),Dn=jn.exports,An=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(pn["a"],{on:{change:t.updateSettings},model:{value:t.settings.MinionDetail.MinionDetailCard.tab,callback:function(e){t.$set(t.settings.MinionDetail.MinionDetailCard,"tab",e)},expression:"settings.MinionDetail.MinionDetailCard.tab"}},[n(bn["a"]),n(hn["a"],{attrs:{href:"#grain"}},[t._v(" "+t._s(t.$t("components.MinionDetailCard.Grains"))+" ")]),n(hn["a"],{attrs:{href:"#pillar"}},[t._v(" "+t._s(t.$t("components.MinionDetailCard.Pillar"))+" ")]),n(hn["a"],{attrs:{href:"#history"}},[t._v(" "+t._s(t.$t("components.MinionDetailCard.History"))+" ")]),n(hn["a"],{attrs:{href:"#graph"}},[t._v(" "+t._s(t.$t("components.MinionDetailCard.Graph"))+" ")]),t._l(t.minion.custom_fields,function(e){return n(hn["a"],{key:e.name},[t._v(" "+t._s(e.name)+" ")])})],2),n(gn["a"],{model:{value:t.settings.MinionDetail.MinionDetailCard.tab,callback:function(e){t.$set(t.settings.MinionDetail.MinionDetailCard,"tab",e)},expression:"settings.MinionDetail.MinionDetailCard.tab"}},[n(fn["a"],{attrs:{id:"grain"}},[n("div",{staticClass:"text-right"},[n(u["a"],{staticClass:"overlayedBtn",on:{click:function(e){return t.fold("grainCm")}}},[t._v(t._s(t.grainCmFolded?t.$t("components.MinionDetailCard.Unfold"):t.$t("components.MinionDetailCard.Fold")))])],1),n("codemirror",{ref:"grainCm",attrs:{options:t.cmOptions},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),n(fn["a"],{attrs:{id:"pillar"}},[n("div",{staticClass:"text-right"},[n(u["a"],{staticClass:"overlayedBtn",on:{click:function(e){return t.fold("pillarCm")}}},[t._v(t._s(t.pillarCmFolded?t.$t("components.MinionDetailCard.Unfold"):t.$t("components.MinionDetailCard.Fold")))])],1),n("codemirror",{ref:"pillarCm",attrs:{options:t.cmOptions},model:{value:t.codepillar,callback:function(e){t.codepillar=e},expression:"codepillar"}})],1),n(fn["a"],{attrs:{id:"history"}},[n("JobsTable",{attrs:{filter:{"target[]":t.minion.minion_id}}})],1),n(fn["a"],{attrs:{id:"graph",eager:""}},[t.minion?n("JobsChartCard",{attrs:{minion:t.minion.minion_id}}):t._e()],1),t._l(t.minion.custom_fields,function(e){return n(fn["a"],{key:e.name},[n("codemirror",{attrs:{options:t.cmOptions,value:t.yamlRepr(e.value)}})],1)})],2)],1)],1)},Mn=[],Rn=n("56b3"),Jn=n.n(Rn),Un=n("8f94"),Pn=(n("f4ba"),n("4895"),n("aedd"),n("cbc8"),n("8d70"),n("f9d4"),n("a7be"),n("ced0"),n("efe9"),n("651e")),On=n.n(Pn),In={name:"MinionDetailCard",components:{JobsTable:ae,JobsChartCard:Pt,codemirror:Un["codemirror"]},data:function(){return{code:On.a.safeDump(JSON.parse(this.minion.grain)),codepillar:On.a.safeDump(JSON.parse(this.minion.pillar)),grainCmFolded:!1,pillarCmFolded:!1,cmOptions:{tabSize:4,mode:"yaml",theme:"made-of-code",line:!0,autoRefresh:!0,lineNumbers:!1,readOnly:!0,cursorBlinkRate:0,foldGutter:!0,gutters:["CodeMirror-foldgutter"]}}},methods:{updateSettings:function(){this.$store.commit("updateSettings")},yamlRepr:function(t){return On.a.safeDump(JSON.parse(t))},fold:function(t){!0===this[t+"Folded"]?(Jn.a.commands.unfoldAll(this.$refs[t].codemirror),this[t+"Folded"]=!1):(Jn.a.commands.foldAll(this.$refs[t].codemirror),this[t+"Folded"]=!0)}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}})),props:["minion"]},Fn=In,En=(n("bf08"),Object(O["a"])(Fn,An,Mn,!1,null,"703d2589",null)),Nn=En.exports;function Ln(t){var e=JSON.parse(t.grain);for(var n in e)t[n]=e[n];return t}var Kn={name:"MinionDetail",components:{Fab:Be,MinionDetailCard:Nn,InfosCard:Sn,NetworkCard:Dn},data:function(){return{minion:null,fabs:[{color:"blue",action:"refreshMinion",icon:"refresh",tooltip:this.$i18n.t("components.MinionDetail.RefreshMinion")+this.minion_id},{color:"purple",action:"runMinion",icon:"play_arrow",tooltip:this.$i18n.t("components.MinionDetail.JobMinion")+this.minion_id},{color:"orange",action:"highstateMinion",icon:"all_inclusive",tooltip:this.$i18n.t("components.MinionDetail.HighstateMinion")+this.minion_id}]}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;this.$http.get("api/minions/".concat(this.minion_id,"/")).then(function(e){return t.minion=Ln(e.data)}).catch(function(e){t.$toast.error(t.$i18n.t("components.MinionDetail.MissingMinion",[t.minion_id])),t.$router.push("/minions")})},fabAction:function(t){this[t]()},refreshMinion:function(){var t=this;this.$toast(this.$i18n.t("components.MinionDetail.Refreshing",[this.minion_id]));var e=new FormData;e.set("minion_id",this.minion_id),this.$http.post("/api/minions/refresh_minions/",e).then(function(){t.$toast(t.$i18n.t("components.MinionDetail.MinionRefreshed"))}).catch(function(e){t.$toast.error(e.response.data)})},runMinion:function(){this.$router.push("/run?tgt="+this.minion_id)},highstateMinion:function(){this.$router.push("/run?tgt="+this.minion_id+"&fun=state.apply")}},props:["minion_id"]},Hn=Kn,zn=Object(O["a"])(Hn,dn,mn,!1,null,"03e5fd8a",null),Bn=zn.exports,qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12",lg:"4"}},[n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(b["a"],{attrs:{"two-line":""}},[n(y["g"],[n(y["k"],{staticClass:"headline"},[t._v(t._s(t.job.fun))]),n(y["j"],[t._v("Run on "+t._s(t.formatDate(t.job.alter_time)))])],1)],1),n(h["a"]),n(vt["a"],[n("tbody",[n("tr",[n("td",[t._v(t._s(t.$t("views.JobDetail.MinionID")))]),n("td",{staticClass:"text-right"},[n(u["a"],{staticClass:"pr-0 text-none",attrs:{text:"",small:"",to:"/minions/"+t.job.id}},[t._v(t._s(t.job.id))])],1)]),n("tr",[n("td",[t._v(t._s(t.$t("views.JobDetail.JobID")))]),n("td",{staticClass:"text-right"},[n(u["a"],{staticClass:"pr-0",attrs:{text:"",small:"",to:"/jobs/"+t.job.jid}},[t._v(t._s(t.job.jid))])],1)]),n("tr",[n("td",[t._v(t._s(t.$t("views.JobDetail.Function")))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.job.fun))])]),t.job.arguments?n("tr",[n("td",[t._v(t._s(t.$t("views.JobDetail.Arguments")))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.job.arguments))])]):t._e(),t.job.keyword_arguments?n("tr",[n("td",[t._v(t._s(t.$t("views.JobDetail.KeywordArguments")))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.job.keyword_arguments))])]):t._e(),n("tr",[n("td",[t._v(t._s(t.$t("views.JobDetail.Status")))]),n("td",{staticClass:"text-right"},[n(Ot["a"],{attrs:{color:t.boolRepr(t.job.success),dark:""}},[t._v(t._s(t.boolText(t.job.success)))])],1)]),n("tr",[n("td",[t._v(t._s(t.$t("views.JobDetail.StartTime")))]),n("td",{staticClass:"text-right"},[t._v(t._s(new Date(t.job.alter_time).toLocaleString("en-GB")))])])])])],1)],1)],1),n(ht["a"],{attrs:{sm:"12",lg:"8"}},[n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.$t("views.JobDetail.Results")))]),n(h["a"]),n("div",{staticClass:"ansiStyle",domProps:{innerHTML:t._s(t.ansiResult)}})],1)],1)],1)],1)],1)},Gn=[],Vn={name:"JobDetail",props:["jid","minion_id"],data:function(){return{job:{},ansiResult:null}},mounted:function(){this.loadData(),this.loadRenderedJob()},methods:{loadData:function(){var t=this;this.$http.get("api/jobs/".concat(this.jid,"/").concat(this.minion_id,"/")).then(function(e){return t.job=e.data})},loadRenderedJob:function(){var t=this;this.$http.get("api/jobs/".concat(this.jid,"/").concat(this.minion_id,"/rendered_state/")).then(function(e){return t.ansiResult=e.data})},boolRepr:function(t){return!0===t?"green":"red"},boolText:function(t){return!0===t?this.$t("views.JobDetail.Success"):this.$t("views.JobDetail.failed")},formatDate:function(t){return new Date(t).toLocaleString("en-GB")}}},Wn=Vn,Xn=(n("4e8f"),Object(O["a"])(Wn,qn,Gn,!1,null,"96f21f5e",null)),Yn=Xn.exports,Zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n("EventsTable")],1)],1)],1)},Qn=[],ts=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("components.EventsTable.Events"))+" "),n(T["a"]),n($["a"],{staticClass:"search",attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.EventsTable.table.sortBy,"sort-desc":t.settings.EventsTable.table.sortDesc,"items-per-page":t.settings.EventsTable.table.itemsPerPage,headers:t.headers,items:t.events,search:t.search,"show-expand":"",loading:t.loading},on:{"update:sortBy":function(e){return t.$set(t.settings.EventsTable.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.EventsTable.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.EventsTable.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.EventsTable.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.EventsTable.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.EventsTable.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"item.alter_time",fn:function(e){var n=e.item;return[t._v(" "+t._s(new Date(n.alter_time).toLocaleString("en-GB"))+" ")]}},{key:"expanded-item",fn:function(e){var s=e.headers,a=e.item;return[n("td",{attrs:{colspan:s.length}},[n("pre",[t._v(t._s(JSON.stringify(t.safeParse(a.data),null,2)))])])]}}])})],1)],1)},es=[];function ns(t){return t.forEach(function(t){var e=JSON.parse(t.data);for(var n in e)"id"===n?t["minion_id"]=e[n]:t[n]=e[n]}),t}var ss={name:"EventsTable",data:function(){return{search:"",headers:[{text:this.$i18n.t("components.EventsTable.Tag"),value:"tag"},{text:this.$i18n.t("components.EventsTable.Jid"),value:"jid"},{text:this.$i18n.t("components.EventsTable.Target"),value:"minion_id"},{text:this.$i18n.t("components.EventsTable.Function"),value:"fun"},{text:this.$i18n.t("components.EventsTable.Arguments"),value:"fun_args"},{text:this.$i18n.t("components.EventsTable.Date"),value:"alter_time"}],events:[],loading:!0}},mounted:function(){this.loadData()},methods:{updateSettings:function(){this.$store.commit("updateSettings")},loadData:function(){var t=this;this.$http.get("api/events/").then(function(e){t.events=ns(e.data),t.loading=!1})},safeParse:function(t){var e;try{e=JSON.parse(t)}catch(n){return{}}return e}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}}))},as=ss,is=Object(O["a"])(as,ts,es,!1,null,"55f0c6b3",null),os=is.exports,rs={name:"Events",components:{EventsTable:os}},ls=rs,cs=Object(O["a"])(ls,Zn,Qn,!1,null,"e368979a",null),us=cs.exports,ds=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n("RunCard")],1)],1)],1)},ms=[],hs=n("2b5d"),fs=n("67b6"),ps=n("43a6"),gs=n("b73d"),bs=n("c964"),vs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],{attrs:{"no-gutters":""}},[n(ht["a"],{attrs:{sm:"12"}},[n(d["a"],{staticClass:"mb-8"},[n(m["e"],[t._v(t._s(t.$t("components.RunCard.Run")))]),n(pn["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n(bn["a"]),n(hn["a"],{attrs:{href:"#formatted"}},[t._v(" "+t._s(t.$t("components.RunCard.Formatted"))+" ")]),n(hn["a"],{attrs:{href:"#cli"}},[t._v(" "+t._s(t.$t("components.RunCard.Cli"))+" ")])],1),n(gn["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n(fn["a"],{attrs:{id:"formatted",eager:""}},[n(d["a"],[n(T["a"]),n(m["d"],[n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{staticClass:"text-right",attrs:{sm:"3",lg:"1","align-self":"center"}},[n("span",[t._v(t._s(t.$t("components.RunCard.ClientType")))])]),n(ht["a"],{attrs:{sm:"3",lg:"1"}},[n($t["a"],{attrs:{items:t.client},model:{value:t.selected_client,callback:function(e){t.selected_client=e},expression:"selected_client"}})],1),t.client_batch||t.scheduleSwitch?t._e():n(ht["a"],{attrs:{sm:"3",lg:"1","offset-lg":"1"}},[n(Ze["a"],{attrs:{label:t.$t("components.RunCard.Async"),color:"primary"},model:{value:t.client_async,callback:function(e){t.client_async=e},expression:"client_async"}})],1),"local"!==t.selected_client||t.scheduleSwitch?t._e():n(ht["a"],{attrs:{sm:"3",lg:"1","offset-lg":t.client_batch?3:1}},[n(Ze["a"],{attrs:{label:t.$t("components.RunCard.Batch"),color:"primary"},model:{value:t.client_batch,callback:function(e){t.client_batch=e},expression:"client_batch"}})],1),"local"===t.selected_client&&t.client_batch&&!t.scheduleSwitch?n(ht["a"],{attrs:{sm:"3",lg:"1"}},[n($["a"],{attrs:{label:t.$t("components.RunCard.Batch")},model:{value:t.batch,callback:function(e){t.batch=e},expression:"batch"}})],1):t._e(),"local"!==t.selected_client||t.scheduleSwitch?t._e():n(ht["a"],{attrs:{sm:"3",lg:"1","offset-lg":t.client_batch?0:1}},[n($["a"],{attrs:{label:t.$t("components.RunCard.Timeout"),type:"number"},model:{value:t.timeout,callback:function(e){t.timeout=e},expression:"timeout"}})],1)],1),n(pt["a"],[n(ht["a"],{attrs:{lg:"1"}},["local"===t.selected_client?n($t["a"],{attrs:{items:t.target_type,label:t.$t("components.RunCard.TargetType")},on:{change:function(e){t.target=null}},model:{value:t.selected_target_type,callback:function(e){t.selected_target_type=e},expression:"selected_target_type"}}):t._e()],1),n(ht["a"],{attrs:{lg:"2"}},["local"===t.selected_client?n($["a"],{attrs:{label:t.$t("components.RunCard.Target")},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}}):t._e()],1),n(ht["a"],{attrs:{lg:"2"}},[n(hs["a"],{ref:"comboFunc",attrs:{"item-value":"name","item-text":"name",items:t.filteredFunction,label:t.$t("components.RunCard.Function"),"return-object":""},on:{change:t.onAutoCompleteSelection,keyup:t.customOnChangeHandler,paste:t.customOnChangeHandler},scopedSlots:t._u([t.dummySelectedFunc?{key:"append-outer",fn:function(){return[n(k["a"],{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n(p["a"],t._g({attrs:{color:"black"}},s),[t._v("info ")])]}}],null,!1,3591029852)},[n("div",{staticClass:"desc"},[n("pre",[t._v(t._s(t.dummySelectedFunc.description))])])])]},proxy:!0}:null],null,!0),model:{value:t.dummySelectedFunc,callback:function(e){t.dummySelectedFunc=e},expression:"dummySelectedFunc"}})],1),n(ht["a"],{attrs:{lg:"3"}},[n($["a"],{attrs:{label:t.$t("components.RunCard.Arguments")},model:{value:t.arg,callback:function(e){t.arg=e},expression:"arg"}})],1),n(ht["a"],{attrs:{lg:"4"}},[n($["a"],{attrs:{label:t.$t("components.RunCard.KeywordArguments")},model:{value:t.kwarg,callback:function(e){t.kwarg=e},expression:"kwarg"}})],1)],1),n(pt["a"],{attrs:{dense:""}},[n(ht["a"],{attrs:{sm:"12",lg:"3"}},[n(pt["a"],{attrs:{dense:""}},[n(ht["a"],{attrs:{sm:"12"}},[n(gs["a"],{directives:[{name:"show",rawName:"v-show",value:"local"===t.selected_client,expression:"selected_client === 'local'"}],attrs:{label:t.$t("components.RunCard.Schedule"),color:"primary"},model:{value:t.scheduleSwitch,callback:function(e){t.scheduleSwitch=e},expression:"scheduleSwitch"}})],1),n(ht["a"],{directives:[{name:"show",rawName:"v-show",value:t.scheduleSwitch,expression:"scheduleSwitch"}],attrs:{sm:"12"}},[n($["a"],{staticStyle:{width:"350px"},attrs:{label:t.$t("components.RunCard.ScheduleName")},model:{value:t.scheduleName,callback:function(e){t.scheduleName=e},expression:"scheduleName"}}),n(ps["a"],{staticClass:"mt-0",model:{value:t.scheduleType,callback:function(e){t.scheduleType=e},expression:"scheduleType"}},[n(fs["a"],{attrs:{value:"once",color:"primary"},scopedSlots:t._u([{key:"label",fn:function(){return[n("span",[n("strong",[t._v(t._s(t.$t("components.RunCard.RunOnce")))])]),n(pt["a"],[n(ht["a"],{staticClass:"ml-2",attrs:{sm:"4"}},[n(k["a"],{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n($["a"],t._g({attrs:{readonly:""},model:{value:t.scheduleDate,callback:function(e){t.scheduleDate=e},expression:"scheduleDate"}},s))]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[n(Zt["a"],{attrs:{min:t.scheduleDate},on:{input:function(e){t.dateMenu=!1}},model:{value:t.scheduleDate,callback:function(e){t.scheduleDate=e},expression:"scheduleDate"}})],1)],1),n(ht["a"],{attrs:{sm:"4"}},[n(k["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n($["a"],t._g({attrs:{readonly:""},model:{value:t.scheduleTime,callback:function(e){t.scheduleTime=e},expression:"scheduleTime"}},s))]}}]),model:{value:t.timeMenu,callback:function(e){t.timeMenu=e},expression:"timeMenu"}},[t.timeMenu?n(bs["a"],{attrs:{"full-width":""},model:{value:t.scheduleTime,callback:function(e){t.scheduleTime=e},expression:"scheduleTime"}}):t._e()],1)],1)],1)]},proxy:!0}])}),n(fs["a"],{attrs:{value:"recurring",color:"primary"},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",[n("strong",[t._v(t._s(t.$t("components.RunCard.Recurring"))+" ")]),t._v(" "+t._s(t.$t("components.RunCard.Every"))+" "),n("span",{attrs:{id:"cron"}})])]},proxy:!0}])})],1)],1)],1)],1),n(ht["a"],{attrs:{sm:"12",lg:"6"}},[n(pt["a"],{attrs:{dense:""}},[n(ht["a"],{attrs:{sm:"12"}},[n(gs["a"],{directives:[{name:"show",rawName:"v-show",value:"local"===t.selected_client,expression:"selected_client === 'local'"}],attrs:{label:t.$t("components.RunCard.Pillar"),color:"primary"},model:{value:t.pillarSwitch,callback:function(e){t.pillarSwitch=e},expression:"pillarSwitch"}})],1),n(ht["a"],{directives:[{name:"show",rawName:"v-show",value:t.pillarSwitch,expression:"pillarSwitch"}],attrs:{sm:"12"}},[n("codemirror",{attrs:{options:t.cmOptions},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),n(ht["a"],{directives:[{name:"show",rawName:"v-show",value:t.pillarSwitch,expression:"pillarSwitch"}],attrs:{sm:"12"}},[n("span",{domProps:{innerHTML:t._s(t.pillarRendered)}})])],1)],1),n(ht["a"],{attrs:{sm:"12",lg:"3"}},[n(pt["a"],{attrs:{dense:""}},[n(ht["a"],{attrs:{sm:"12"}},[n(gs["a"],{attrs:{label:t.$t("components.RunCard.SaveAsTemplate"),color:"primary"},model:{value:t.saveJobSwitch,callback:function(e){t.saveJobSwitch=e},expression:"saveJobSwitch"}})],1),n(ht["a"],{directives:[{name:"show",rawName:"v-show",value:t.saveJobSwitch,expression:"saveJobSwitch"}],attrs:{sm:"12"}},[n($["a"],{staticStyle:{width:"350px"},attrs:{label:t.$t("components.RunCard.JobTemplateName")},model:{value:t.jobTemplateName,callback:function(e){t.jobTemplateName=e},expression:"jobTemplateName"}})],1)],1)],1)],1)],1)],1),n(m["b"],[n(T["a"]),n(u["a"],{directives:[{name:"show",rawName:"v-show",value:!t.saveJobSwitch,expression:"!saveJobSwitch"}],attrs:{color:"orange",large:"",dark:""},on:{click:function(e){t.runJob(t.test=!0)}}},[t._v(t._s(t.$t("components.RunCard.Test")))]),n(u["a"],{directives:[{name:"show",rawName:"v-show",value:!t.saveJobSwitch,expression:"!saveJobSwitch"}],attrs:{color:"info",large:"",dark:""},on:{click:t.runJob}},[t._v(t._s(t.$t("components.RunCard.Run")))]),n(u["a"],{directives:[{name:"show",rawName:"v-show",value:t.saveJobSwitch,expression:"saveJobSwitch"}],attrs:{color:"green",large:"",dark:""},on:{click:t.saveJob}},[t._v(t._s(t.$t("components.RunCard.Save")))])],1)],1)],1),n(fn["a"],{attrs:{id:"cli"}},[null!==t.functions?n("TerminalCard",{attrs:{minions:t.minions,functions:t.functions}}):t._e()],1)],1)],1)],1)],1),n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[t.results?n(d["a"],[n(m["e"],[t._v(t._s(t.$t("components.RunCard.Results"))+" "),n(T["a"]),n(u["a"],{attrs:{color:"primary",dark:""},on:{click:function(e){t.results=""}}},[t._v(t._s(t.$t("components.RunCard.Clear")))])],1),n(m["d"],{staticClass:"ansiStyle",domProps:{innerHTML:t._s(t.results)}})],1):t._e()],1)],1)],1)},_s=[],ys=(n("fb6a"),n("e9c4"),n("dc22")),Cs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(pt["a"],{directives:[{def:ys["b"],name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}]},[n(ht["a"],{attrs:{sm:"12"}},[n("div",{staticClass:"console",attrs:{id:"terminal"}})])],1)},ks=[],Ss=n("fcf3"),Ts=n("47d0"),$s=(n("abb2"),n("d4ec")),xs=n("bee2"),ws=(n("c740"),n("38cf"),n("a630"),n("3ca3"),n("4e827"),n("498a"),function(){function t(e){Object($s["a"])(this,t),this.size=e,this.entries=[],this.cursor=0}return Object(xs["a"])(t,[{key:"push",value:function(t){if(""!==t.trim()){var e=this.entries[this.entries.length-1];t!=e&&(this.entries.push(t),this.entries.length>this.size&&this.entries.pop(0),this.cursor=this.entries.length)}}},{key:"rewind",value:function(){this.cursor=this.entries.length}},{key:"getPrevious",value:function(){var t=Math.max(0,this.cursor-1);return this.cursor=t,this.entries[t]}},{key:"getNext",value:function(){var t=Math.min(this.entries.length,this.cursor+1);return this.cursor=t,this.entries[t]}}]),t}()),js=n("2909"),Ds=(n("7db0"),n("466d"),n("1276"),n("8a79"),n("8e33"));function As(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=[],a=/\w+/g;while(e=a.exec(t))n?s.push(e.index):s.push(e.index+e[0].length);return s}function Ms(t,e){var n=As(t,!0).reverse().find(function(t){return t<e});return null==n?0:n}function Rs(t,e){var n=As(t,!1).find(function(t){return t>e});return null==n?t.length:n}function Js(t,e,n){for(var s=0,a=0,i=0;i<e;++i){var o=t.charAt(i);"\n"==o?(a=0,s+=1):(a+=1,a>n&&(a=0,s+=1))}return{row:s,col:a}}function Us(t,e){return Js(t,t.length,e).row+1}function Ps(t){return""!=t.trim()&&((t.match(/'/g)||[]).length%2!==0||((t.match(/"/g)||[]).length%2!==0||(""==t.split(/(\|\||\||&&)/g).pop().trim()||!(!t.endsWith("\\")||t.endsWith("\\\\")))))}function Os(t){return null!=t.match(/[^\\][ \t]$/m)}function Is(t){if(""===t.trim())return"";if(Os(t))return"";var e=Object(Ds["parse"])(t);return e.pop()||""}function Fs(t,e){var n=Object(Ds["parse"])(e),s=n.length-1,a=n[s]||"";""===e.trim()?(s=0,a=""):Os(e)&&(s+=1,a="");var i=t.reduce(function(t,e){var a=e.fn,i=e.args;try{return t.concat(a.apply(void 0,[s,n].concat(Object(js["a"])(i))))}catch(o){return console.error("Auto-complete error:",o),t}},[]);return i.filter(function(t){return t.startsWith(a)})}var Es=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object($s["a"])(this,t),this.term=e,this._handleTermData=this.handleTermData.bind(this),this._handleTermResize=this.handleTermResize.bind(this),this.history=new ws(n.historySize||100),this.maxAutocompleteEntries=n.maxAutocompleteEntries||100,this._autocompleteHandlers=[],this._active=!1,this._input="",this._cursor=0,this._activePrompt=null,this._activeCharPrompt=null,this._termSize={cols:this.term.cols,rows:this.term.rows},this.attach()}return Object(xs["a"])(t,[{key:"detach",value:function(){this.term.off("data",this._handleTermData),this.term.off("resize",this._handleTermResize)}},{key:"attach",value:function(){this.term.onData(this._handleTermData),this.term.onResize(this._handleTermResize)}},{key:"addAutocompleteHandler",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];this._autocompleteHandlers.push({fn:t,args:n})}},{key:"removeAutocompleteHandler",value:function(t){var e=this._autocompleteHandlers.findIndex(function(e){return e.fn===t});-1!==e&&this._autocompleteHandlers.splice(e,1)}},{key:"read",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"> ";return new Promise(function(s,a){e.term.write(t),e._activePrompt={prompt:t,continuationPrompt:n,resolve:s,reject:a},e._input="",e._cursor=0,e._active=!0})}},{key:"readChar",value:function(t){var e=this;return new Promise(function(n,s){e.term.write(t),e._activeCharPrompt={prompt:t,resolve:n,reject:s}})}},{key:"abortRead",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aborted";null==this._activePrompt&&null==this._activeCharPrompt||this.term.write("\r\n"),null!=this._activePrompt&&(this._activePrompt.reject(t),this._activePrompt=null),null!=this._activeCharPrompt&&(this._activeCharPrompt.reject(t),this._activeCharPrompt=null),this._active=!1}},{key:"println",value:function(t){this.print(t+"\n")}},{key:"print",value:function(t){var e=t.replace(/[\r\n]+/g,"\n");this.term.write(e.replace(/\n/g,"\r\n"))}},{key:"printWide",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0==t.length)return println("");for(var n=t.reduce(function(t,e){return Math.max(t,e.length)},0)+e,s=Math.floor(this._termSize.cols/n),a=Math.ceil(t.length/s),i=0,o=0;o<a;++o){for(var r="",l=0;l<s;++l)if(i<t.length){var c=t[i++];c+=" ".repeat(n-c.length),r+=c}this.println(r)}}},{key:"applyPrompts",value:function(t){var e=(this._activePrompt||{}).prompt||"",n=(this._activePrompt||{}).continuationPrompt||"";return e+t.replace(/\n/g,"\n"+n)}},{key:"applyPromptOffset",value:function(t,e){var n=this.applyPrompts(t.substr(0,e));return n.length}},{key:"clearInput",value:function(){for(var t=this.applyPrompts(this._input),e=Us(t,this._termSize.cols),n=this.applyPromptOffset(this._input,this._cursor),s=Js(t,n,this._termSize.cols),a=(s.col,s.row),i=e-a-1,o=0;o<i;++o)this.term.write("[E");this.term.write("\r[K");for(o=1;o<e;++o)this.term.write("[F[K")}},{key:"setInput",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.clearInput();var n=this.applyPrompts(t);this.print(n),this._cursor>t.length&&(this._cursor=t.length);var s=this.applyPromptOffset(t,this._cursor),a=Us(n,this._termSize.cols),i=Js(n,s,this._termSize.cols),o=i.col,r=i.row,l=a-r-1;this.term.write("\r");for(var c=0;c<l;++c)this.term.write("[F");for(c=0;c<o;++c)this.term.write("[C");this._input=t}},{key:"printAndRestartPrompt",value:function(t){var e=this,n=this._cursor;this.setCursor(this._input.length),this.term.write("\r\n");var s=function(){e._cursor=n,e.setInput(e._input)},a=t();null==a?s():a.then(s)}},{key:"setCursor",value:function(t){t<0&&(t=0),t>this._input.length&&(t=this._input.length);var e=this.applyPrompts(this._input),n=(Us(e,this._termSize.cols),this.applyPromptOffset(this._input,this._cursor)),s=Js(e,n,this._termSize.cols),a=s.col,i=s.row,o=this.applyPromptOffset(this._input,t),r=Js(e,o,this._termSize.cols),l=r.col,c=r.row;if(c>i)for(var u=i;u<c;++u)this.term.write("[B");else for(var d=c;d<i;++d)this.term.write("[A");if(l>a)for(var m=a;m<l;++m)this.term.write("[C");else for(var h=l;h<a;++h)this.term.write("[D");this._cursor=t}},{key:"handleCursorMove",value:function(t){if(t>0){var e=Math.min(t,this._input.length-this._cursor);this.setCursor(this._cursor+e)}else if(t<0){var n=Math.max(t,-this._cursor);this.setCursor(this._cursor+n)}}},{key:"handleCursorErase",value:function(t){var e=this._cursor,n=this._input;if(t){if(e<=0)return;var s=n.substr(0,e-1)+n.substr(e);this.clearInput(),this._cursor-=1,this.setInput(s,!1)}else{var a=n.substr(0,e)+n.substr(e+1);this.setInput(a)}}},{key:"handleCursorInsert",value:function(t){var e=this._cursor,n=this._input,s=n.substr(0,e)+t+n.substr(e);this._cursor+=t.length,this.setInput(s)}},{key:"handleReadComplete",value:function(){this.history&&this.history.push(this._input),this._activePrompt&&(this._activePrompt.resolve(this._input),this._activePrompt=null),this.term.write("\r\n"),this._active=!1}},{key:"handleTermResize",value:function(t){var e=t.rows,n=t.cols;this.clearInput(),this._termSize={cols:n,rows:e},this.setInput(this._input,!1)}},{key:"handleTermData",value:function(t){var e=this;if(this._active){if(null!=this._activeCharPrompt)return this._activeCharPrompt.resolve(t),this._activeCharPrompt=null,void this.term.write("\r\n");if(t.length>3&&27!==t.charCodeAt(0)){var n=t.replace(/[\r\n]+/g,"\r");Array.from(n).forEach(function(t){return e.handleData(t)})}else this.handleData(t)}}},{key:"handleData",value:function(t){var e=this;if(this._active){var n,s=t.charCodeAt(0);if(27==s)switch(t.substr(1)){case"[A":if(this.history){var a=this.history.getPrevious();a&&(this.setInput(a),this.setCursor(a.length))}break;case"[B":if(this.history){var i=this.history.getNext();i||(i=""),this.setInput(i),this.setCursor(i.length)}break;case"[D":this.handleCursorMove(-1);break;case"[C":this.handleCursorMove(1);break;case"[3~":this.handleCursorErase(!1);break;case"[F":this.setCursor(this._input.length);break;case"[H":this.setCursor(0);break;case"b":n=Ms(this._input,this._cursor),null!=n&&this.setCursor(n);break;case"f":n=Rs(this._input,this._cursor),null!=n&&this.setCursor(n);break;case"":n=Ms(this._input,this._cursor),null!=n&&(this.setInput(this._input.substr(0,n)+this._input.substr(this._cursor)),this.setCursor(n));break}else if(s<32||127===s)switch(t){case"\r":Ps(this._input)?this.handleCursorInsert("\n"):this.handleReadComplete();break;case"":this.handleCursorErase(!0);break;case"\t":if(this._autocompleteHandlers.length>0){var o=this._input.substr(0,this._cursor),r=Os(o),l=Fs(this._autocompleteHandlers,o);if(l.sort(),0===l.length)r||this.handleCursorInsert(" ");else if(1===l.length){var c=Is(o);this.handleCursorInsert(l[0].substr(c.length)+" ")}else l.length<=this.maxAutocompleteEntries?this.printAndRestartPrompt(function(){e.printWide(l)}):this.printAndRestartPrompt(function(){return e.readChar("Display all ".concat(l.length," possibilities? (y or n)")).then(function(t){"y"!=t&&"Y"!=t||e.printWide(l)})})}else this.handleCursorInsert("    ");break;case"":this.setCursor(this._input.length),this.term.write("^C\r\n"+((this._activePrompt||{}).prompt||"")),this._input="",this._cursor=0,this.history&&this.history.rewind();break}else this.handleCursorInsert(t)}}}]),t}(),Ns={name:"TerminalCard",props:["minions","functions"],data:function(){return{term:null,fitter:null,functions_name:null}},methods:{initTerm:function(){var t=this,e=document.getElementById("terminal");this.term=new Ss["Terminal"]({cursorBlink:!0,fontSize:20,fontFamily:"'Roboto Mono', monospace"});var n=new Ts["FitAddon"];this.term.loadAddon(n),this.term.open(e),n.fit(),this.fitter=n;var s=new Es(this.term);s.addAutocompleteHandler(function(t){return 0!==t?[]:["salt","clear"]}),s.addAutocompleteHandler(function(e){return 1!==e?[]:t.minions}),s.addAutocompleteHandler(function(e){return 2!==e?[]:t.functions.map(function(t){return t.name})});var a="Usage: salt [options] '<target>' <function> [arguments]",i=function e(){s.read(" ~$ ").then(function(n){var i=n.split(" ").filter(function(t){return""!==t});if(0===i.length)e();else if(1===i.length&&"clear"===i[0])t.term.clear(),e();else if(i.length<=2)s.println(a),e();else if(n.split(" ").length>=3&&"salt"===i[0]){var o=new FormData;o.set("raw",!0),o.set("cli",!0),o.set("command",n),t.$toast(t.$i18n.t("components.TerminalCard.Running")+n),t.$http.post("api/run/",o).then(function(t){s.println(t.data.results)}).catch(function(e){t.$toast.error(e.response.data)}).then(function(){return e()})}else s.println(a),e()})};i()},onResize:function(){null!==this.term&&this.fitter.fit()}},mounted:function(){var t=this;setTimeout(function(){t.initTerm()},100)},beforeDestroy:function(){null!==this.term&&this.term.dispose()}},Ls=Ns,Ks=Object(O["a"])(Ls,Cs,ks,!1,null,"17cf410e",null),Hs=Ks.exports;function zs(t,e){if(t instanceof HTMLElement)this.el=t;else{if("string"!==typeof t)throw"CronUI: container parameter in initialization must be an html element or a string selector.";this.el=document.querySelector(t)}this.options=e||{},this.render(),"string"!==typeof this.options.initial&&(this.options.initial="* * * * *"),this.setCronString(this.options.initial),this.currentValue=this.options.initial}zs.prototype.render=function(){var t,e,n,s=this.el,a="";for(n=0;n<60;n++)e=n<10?"0":"",a+="<option value='"+n+"'>"+e+n+"</option>\n";var i="";for(n=0;n<24;n++)e=n<10?"0":"",i+="<option value='"+n+"'>"+e+n+"</option>\n";var o="";for(n=1;n<32;n++)t=1==n||21==n||31==n?"st":2==n||22==n?"nd":3==n||23==n?"rd":"th",o+="<option value='"+n+"'>"+n+t+"</option>\n";var r="",l=["January","February","March","April","May","June","July","August","September","October","November","December"];for(n=0;n<l.length;n++)r+="<option value='"+(n+1)+"'>"+l[n]+"</option>\n";var c="",u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(n=0;n<u.length;n++)c+="<option value='"+n+"'>"+u[n]+"</option>\n";var d="",m=["minute","hour","day","week","month","year"];for(n=0;n<m.length;n++)d+="<option value='"+m[n]+"'>"+m[n]+"</option>\n";var h={};s.insertAdjacentHTML("beforeend","<span class='cron-period'><select>"+d+"</select></span>");var f=s.querySelector(".cron-period select");for(var p in f.addEventListener("change",this.periodChanged.bind(this)),f.addEventListener("change",this.changeEvent.bind(this)),s.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-dom'> on the <select name='cron-dom'>"+o+"</select> </span>"),h["dom"]=s.querySelector(".cron-block-dom"),s.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-month'> of <select name='cron-month'>"+r+"</select> </span>"),h["month"]=s.querySelector(".cron-block-month"),s.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-mins'> at <select name='cron-mins'>"+a+"</select> minutes past the hour </span>"),h["mins"]=s.querySelector(".cron-block-mins"),s.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-dow'> on <select name='cron-dow'>"+c+"</select> </span>"),h["dow"]=s.querySelector(".cron-block-dow"),s.insertAdjacentHTML("beforeend","<span class='cron-block cron-block-time'> at <select name='cron-time-hour' class='cron-time-hour'>"+i+"</select>:<select name='cron-time-min' class='cron-time-min'>"+a+" </span>"),h["time"]=s.querySelector(".cron-block-time"),h)[].forEach.call(h[p].querySelectorAll("select"),function(t){t.addEventListener("change",this.changeEvent.bind(this))}.bind(this));this.blocks=h},zs.prototype.periodChanged=function(){var t=this.blocks,e=this.el.querySelector(".cron-period select"),n=e.options[e.selectedIndex].value;for(var s in t)t[s].style.display="none";if(zs.displayMatrix.hasOwnProperty(n))for(var a=zs.displayMatrix[n],i=0;i<a.length;i++)t[a[i]].style.display=""},zs.prototype.changeEvent=function(){this.currentValue=this.getCronString(),"function"===typeof this.options.changeEvent&&this.options.changeEvent(this.currentValue)},zs.prototype.getCronString=function(){var t,e,n,s,a;t=e=n=s=a="*";var i=this.blocks,o=function(t){return t.options[t.selectedIndex].value},r=o(this.el.querySelector(".cron-period select"));switch(r){case"minute":break;case"hour":t=o(i["mins"].querySelector("select"));break;case"day":t=o(i["time"].querySelector(".cron-time-min")),e=o(i["time"].querySelector(".cron-time-hour"));break;case"week":t=o(i["time"].querySelector(".cron-time-min")),e=o(i["time"].querySelector(".cron-time-hour")),a=o(i["dow"].querySelector("select"));break;case"month":t=o(i["time"].querySelector(".cron-time-min")),e=o(i["time"].querySelector(".cron-time-hour")),n=o(i["dom"].querySelector("select"));break;case"year":t=o(i["time"].querySelector(".cron-time-min")),e=o(i["time"].querySelector(".cron-time-hour")),n=o(i["dom"].querySelector("select")),s=o(i["month"].querySelector("select"));break;default:return r}return[t,e,n,s,a].join(" ")},zs.prototype.setCronString=function(t){var e=this.blocks,n=zs.getCronType(t);if(!n)return!1;for(var s=t.split(" "),a={mins:s[0],hour:s[1],dom:s[2],month:s[3],dow:s[4]},i=zs.displayMatrix[n],o=0;o<i.length;o++){var r=i[o];"time"==r?(e[r].querySelector(".cron-time-hour").value=a["hour"],e[r].querySelector(".cron-time-min").value=a["mins"]):e[r].querySelector("select").value=a[r]}return this.el.querySelector(".cron-period select").value=n,this.periodChanged(),this},zs.displayMatrix={minute:[],hour:["mins"],day:["time"],week:["dow","time"],month:["dom","time"],year:["dom","month","time"]},zs.cronTypes={minute:/^(\*\s){4}\*$/,hour:/^\d{1,2}\s(\*\s){3}\*$/,day:/^(\d{1,2}\s){2}(\*\s){2}\*$/,week:/^(\d{1,2}\s){2}(\*\s){2}\d{1,2}$/,month:/^(\d{1,2}\s){3}\*\s\*$/,year:/^(\d{1,2}\s){4}\*$/},zs.getCronType=function(t){t=t||this.getCronString();var e=/^((\d{1,2}|\*)\s){4}(\d{1,2}|\*)$/;if("string"==typeof t&&e.test(t)){for(var n=t.split(" "),s=[0,0,1,1,0],a=[59,23,31,12,6],i=0;i<n.length;i++)if("*"!=n[i]){var o=parseInt(n[i]);if(!(o<=a[i]&&o>=s[i]))return}for(var r in zs.cronTypes)if(zs.cronTypes[r].test(t))return r}};var Bs=zs,qs={name:"RunCard",components:{TerminalCard:Hs,codemirror:Un["codemirror"]},data:function(){return{scheduleSwitch:!1,pillarSwitch:!1,saveJobSwitch:!1,jobTemplateName:"",code:"# Type valid yaml to override pillars\n\n\n",cmOptions:{tabSize:4,mode:"yaml",theme:"made-of-code",line:!0,autoRefresh:!0,lineNumbers:!1,foldGutter:!0,gutters:["CodeMirror-foldgutter"]},tab:null,client:[{text:"Local",value:"local"},{text:"Runner",value:"runner"},{text:"Wheel",value:"wheel"}],selected_client:"local",client_async:!1,client_batch:!1,minions:[],functions:null,dummySelectedFunc:null,selectedFunc:null,description:null,batch:null,timeout:null,target_type:[{text:"glob",value:"glob"},{text:"pcre",value:"--pcre"},{text:"list",value:"--list"},{text:"grain",value:"--grain"},{text:"grain_pcre",value:"--grain-pcre"},{text:"pillar",value:"--pillar"},{text:"pillar_pcre",value:"--pillar-pcre"},{text:"range",value:"--range"},{text:"compound",value:"--compound"},{text:"nodegroup",value:"--nodegroup"}],selected_target_type:"glob",target:"",arg:"",kwarg:"",results:"",termKey:0,cron:null,dateMenu:!1,timeMenu:!1,scheduleType:null,scheduleDate:(new Date).toISOString().substr(0,10),scheduleTime:(new Date).toISOString().substr(11,11).split(":").slice(0,-1).join(":"),scheduleName:null}},methods:{onAutoCompleteSelection:function(){this.selectedFunc=this.dummySelectedFunc.name||this.dummySelectedFunc},customOnChangeHandler:function(){var t=this;setTimeout(function(){t.$refs.comboFunc&&(t.selectedFunc=t.$refs.comboFunc.internalSearch)})},loadData:function(){var t=this;this.$http.get("api/functions/").then(function(e){t.functions=e.data}),this.$http.get("api/minions/").then(function(e){e.data.forEach(function(e){return t.minions.push(e.minion_id)})})},createCommand:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="salt --client=".concat(this.client_batch?"local_batch":this.selected_client).concat(this.client_async&&!this.client_batch?"_async":"");return"local"===this.selected_client&&("glob"!==this.selected_target_type?e+=" "+this.selected_target_type+" "+this.target:e+=" "+this.target),this.selectedFunc&&this.selectedFunc.hasOwnProperty("name")?e+=" ".concat(this.selectedFunc.name):e+=" ".concat(this.selectedFunc),e+="".concat(this.arg?" ".concat(this.arg):"").concat(!0===t?" test=True":"").concat(this.kwarg?" ".concat(this.kwarg):""),e+="".concat(this.pillarSwitch?" pillar='".concat(this.pillarRendered,"'"):""),e+="".concat(this.client_batch&&this.batch?" -b ".concat(this.batch):"").concat(this.timeout?" -t ".concat(this.timeout):""),e},saveJob:function(){var t=this,e=new FormData,n=this.createCommand(!1);e.set("name",this.jobTemplateName),e.set("job",n),this.$http.post("api/job_templates/",e).then(function(e){t.$toast(t.$i18n.t("components.RunCard.TemplateSaved",[t.jobTemplateName]))})},runJob:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.$i18n.t("components.RunCard.Running"),s=new FormData,a=this.createCommand(e);s.set("raw",!0),s.set("command",a),this.scheduleSwitch&&this.scheduleType&&(n=this.$i18n.t("components.RunCard.Scheduling"),s.set("schedule_type",this.scheduleType),this.scheduleName&&s.set("schedule_name",this.scheduleName),"once"===this.scheduleType?s.set("schedule",this.scheduleDate+" "+this.scheduleTime+":00"):s.set("cron",this.cron.currentValue)),this.$toast(n+" "+a),this.$http.post("api/run/",s).then(function(e){var n=e.data;if(t.client_async&&"local"===t.selected_client){for(var s=new DOMParser,a=s.parseFromString(n,"text/html"),i=a.getElementsByClassName("ansi2html-content")[0].children,o=i[i.length-1].innerText,r=1;r<i.length-2;r++){var l=document.createElement("a"),c=document.createTextNode(i[r].innerText);l.appendChild(c),l.title="Async result to job for ".concat(i[r].innerText.replace("- ","")),l.href="/#/jobs/".concat(o,"/").concat(i[r].innerText.replace("- ","")),i[r].innerHTML="",i[r].appendChild(l)}n=(new XMLSerializer).serializeToString(a)}t.results=n+t.results}).catch(function(e){t.$toast.error(e.response.data)})}},computed:{filteredFunction:function(){var t=this;if(null!==this.functions)return this.functions.filter(function(e){return e.type===t.selected_client})},pillarRendered:function(){return"".concat(JSON.stringify(null===On.a.safeLoad(this.code)?{}:On.a.safeLoad(this.code)))}},mounted:function(){var t=this;if(this.cron=new Bs("#cron",{initial:"* * * * *"}),this.loadData(),this.$route.query.client&&(this.selected_client=this.$route.query.client.split("_")[0],this.$route.query.client.split("_").length>1&&(this["client_"+this.$route.query.client.split("_")[1]]=!0)),this.$route.query.tgt_type&&this.target_type.forEach(function(e){e.text===t.$route.query.tgt_type&&(t.selected_target_type=e.value)}),this.batch=this.$route.query.batch?this.$route.query.batch:null,this.target=this.$route.query.tgt,!0===this.$route.query.hasOwnProperty("fun")&&(this.selectedFunc={name:this.$route.query.fun},this.dummySelectedFunc=this.$route.query.fun),this.arg=this.$route.query.arg,this.$route.query.kwarg){var e=this.$route.query.kwarg.split(" ").filter(function(t){return t.startsWith("pillar")}).join();e?(this.pillarSwitch=!0,this.code=On.a.dump(JSON.parse(e.split("=")[1])),this.kwarg=this.$route.query.kwarg.split(" ").filter(function(t){return!t.startsWith("pillar")}).join(" ")):this.kwarg=this.$route.query.kwarg}this.$route.query.name&&(this.saveJobSwitch=!0,this.jobTemplateName=this.$route.query.name)}},Gs=qs,Vs=(n("0560"),Object(O["a"])(Gs,vs,_s,!1,null,"3def82fc",null)),Ws=Vs.exports,Xs={name:"Run",components:{RunCard:Ws}},Ys=Xs,Zs=Object(O["a"])(Ys,ds,ms,!1,null,"3854937f",null),Qs=Zs.exports,ta=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n("CommonSettings")],1)],1),n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n("UserSettings")],1)],1)],1)},ea=[],na=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.$t("components.CommonSettings.Title")))]),n(m["d"],[n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"4",lg:"2","align-self":"center"}},[t._v(" "+t._s(t.$t("components.CommonSettings.Parse"))+" ")]),n(ht["a"],{attrs:{sm:"4",lg:"2"}},[n($t["a"],{attrs:{items:t.minions,"item-text":"minion_id","item-value":"minion_id",label:t.$t("components.CommonSettings.Target")},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}})],1),n(ht["a"],{attrs:{"align-self":"center"}},[n(u["a"],{attrs:{disabled:null==t.target,color:"primary"},on:{click:t.parseModules}},[t._v(t._s(t.$t("components.CommonSettings.Submit")))])],1),n(ht["a"],{attrs:{sm:"4",lg:"1","align-self":"center"}},[t._v(" Alcali Version: ")]),n(ht["a"],{attrs:{sm:"4",lg:"2","align-self":"center"}},[n("span",[t._v(t._s(t.version))])])],1),n(pt["a"],[n(ht["a"],{attrs:{sm:"12",lg:"6"}},[n(pt["a"],[t._v(t._s(t.$t("components.CommonSettings.Fields")))]),t._l(t.uniqueMinionField,function(e){return n(pt["a"],{key:e.name},[n(ht["a"],{attrs:{lg:"4"}},[n("b",[t._v(t._s(e.name))])]),n(ht["a"],{attrs:{lg:"4"}},[t._v(t._s(e["function"]))]),n(ht["a"],{attrs:{"align-self":"center"}},[n(u["a"],{attrs:{color:"red",dark:""},on:{click:function(n){return t.deleteMinionsFields(e.name)}}},[t._v(t._s(t.$t("components.CommonSettings.Delete")))])],1)],1)}),n(pt["a"],[n(ht["a"],{attrs:{lg:"4"}},[n($["a"],{attrs:{label:t.$t("components.CommonSettings.Name"),"single-line":""},model:{value:t.minionsfields_name,callback:function(e){t.minionsfields_name=e},expression:"minionsfields_name"}})],1),n(ht["a"],{attrs:{lg:"4"}},[n(hs["a"],{ref:"comboMinionFunc",attrs:{items:t.functions,"item-value":"name","item-text":"name",label:t.$t("components.CommonSettings.Functions")},on:{change:t.onAutoCompleteSelection,keyup:t.customOnChangeHandler,paste:t.customOnChangeHandler},model:{value:t.dummy_minionsfields_value,callback:function(e){t.dummy_minionsfields_value=e},expression:"dummy_minionsfields_value"}})],1),n(ht["a"],{attrs:{"align-self":"center"}},[n(u["a"],{attrs:{disabled:null==t.minionsfields_name||null==t.minionsfields_value,color:"primary"},on:{click:t.createMinionsFields}},[t._v(t._s(t.$t("components.CommonSettings.Create"))+" ")])],1)],1)],2),n(ht["a"],{attrs:{sm:"12",lg:"6"}},[n(pt["a"],[t._v(t._s(t.$t("components.CommonSettings.Conformity")))]),t._l(t.conformity,function(e){return n(pt["a"],{key:e.id},[n(ht["a"],{attrs:{lg:"4"}},[n("b",[t._v(t._s(e.name))])]),n(ht["a"],{attrs:{lg:"4"}},[t._v(t._s(e.function))]),n(ht["a"],{attrs:{"align-self":"center"}},[n(u["a"],{attrs:{color:"red",dark:""},on:{click:function(n){return t.deleteConformity(e.id)}}},[t._v(t._s(t.$t("components.CommonSettings.Delete")))])],1)],1)}),n(pt["a"],[n(ht["a"],{attrs:{lg:"4"}},[n($["a"],{attrs:{label:t.$t("components.CommonSettings.Name"),"single-line":""},model:{value:t.conformity_name,callback:function(e){t.conformity_name=e},expression:"conformity_name"}})],1),n(ht["a"],{attrs:{lg:"4"}},[n($["a"],{attrs:{label:t.$t("components.CommonSettings.Function"),"single-line":""},model:{value:t.conformity_value,callback:function(e){t.conformity_value=e},expression:"conformity_value"}})],1),n(ht["a"],{attrs:{"align-self":"center"}},[n(u["a"],{attrs:{disabled:null==t.conformity_name||null===t.conformity_value,color:"primary"},on:{click:t.createConformity}},[t._v(t._s(t.$t("components.CommonSettings.Create"))+" ")])],1)],1)],2)],1)],1)],1)],1)],1)},sa=[],aa={name:"CommonSettings",data:function(){return{version:"unknown",minions:[],target:null,functions:[],minionsfields:[],minionsfields_name:null,minionsfields_value:null,dummy_minionsfields_value:null,conformity:[],conformity_name:null,conformity_value:null}},mounted:function(){this.loadData()},computed:{uniqueMinionField:function(){if(null!==this.minionsfields)return this.minionsfields.filter(function(t,e,n){return e===n.findIndex(function(e){return e["function"]===t["function"]&&e.name===t.name})})}},methods:{onAutoCompleteSelection:function(){this.minionsfields_value=this.dummy_minionsfields_value.name||this.dummy_minionsfields_value},customOnChangeHandler:function(){var t=this;setTimeout(function(){t.$refs.comboMinionFunc&&(t.minionsfields_value=t.$refs.comboMinionFunc.internalSearch)})},loadData:function(){var t=this;this.$http.get("api/keys/").then(function(e){t.minions=e.data.filter(function(t){return"accepted"===t.status})}),this.$http.get("api/functions/").then(function(e){t.functions=e.data.filter(function(t){return"local"===t.type})}),this.$http.get("api/conformity/").then(function(e){t.conformity=e.data}),this.$http.get("api/minionsfields/").then(function(e){t.minionsfields=e.data}),this.$http.get("api/version/").then(function(e){t.version=e.data.version})},parseModules:function(){var t=this;this.$toast(this.$i18n.t("components.CommonSettings.ParseModulesStart"));var e=new FormData;e.set("target",this.target),this.$http.post("api/settings/initdb",e).then(function(e){t.$toast(e.data.result)}).then(function(){t.loadData()}).catch(function(e){t.$toast.error(e.response.data)})},deleteConformity:function(t){var e=this,n=new FormData;n.set("id",t),this.$http.delete("/api/conformity/"+t).then(function(){e.$toast(e.$i18n.t("components.CommonSettings.ConformityDeleted")),e.conformity.splice(e.conformity.indexOf(t),1)})},createConformity:function(){var t=this,e=new FormData;e.set("name",this.conformity_name),e.set("function",this.conformity_value),this.$http.post("/api/conformity/",e).then(function(){t.conformity.push({name:t.conformity_name,function:t.conformity_value,id:t.conformity.length+2}),t.$toast(t.$i18n.t("components.CommonSettings.ConformityCreated")),t.conformity_name=null,t.conformity_value=null})},createMinionsFields:function(){var t=this,e=new FormData;e.set("name",this.minionsfields_name),e.set("function",this.minionsfields_value.name||this.minionsfields_value),e.set("value","{}"),this.$http.post("/api/minionsfields/",e).then(function(){t.minionsfields.push({name:t.minionsfields_name,function:t.minionsfields_value.name||t.minionsfields_value}),t.$toast(t.$i18n.t("components.CommonSettings.MinionsFieldsCreated")),t.minionsfields_name=null,t.minionsfields_value=null})},deleteMinionsFields:function(t){var e=this,n=new FormData;n.set("name",t),this.$http.post("/api/minionsfields/delete_field/",n).then(function(n){e.$toast(n.data.result),e.minionsfields=e.minionsfields.filter(function(e){return e.name!==t})})}}},ia=aa,oa=Object(O["a"])(ia,na,sa,!1,null,"b05aaa2c",null),ra=oa.exports,la=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.$t("components.UserSettings.UserSettings")))]),n(m["d"],[n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{lg:"2"}},[n("span",[t._v(t._s(t.$t("components.UserSettings.JobsNotifications")))]),t._l(t.settings.UserSettings.notifs,function(e,s){return n("div",{key:s},[n(gs["a"],{attrs:{label:t.$t("components.UserSettings."+s),color:"primary","hide-details":""},model:{value:t.settings.UserSettings.notifs[s],callback:function(e){t.$set(t.settings.UserSettings.notifs,s,e)},expression:"settings.UserSettings.notifs[name]"}})],1)})],2),n(ht["a"],{attrs:{lg:"2"}},[n("span",[t._v(t._s(t.$t("components.UserSettings.MaxNotifications")))]),n($["a"],{attrs:{type:"number"},model:{value:t.settings.UserSettings.max_notifs,callback:function(e){t.$set(t.settings.UserSettings,"max_notifs",e)},expression:"settings.UserSettings.max_notifs"}})],1),n(ht["a"],{attrs:{lg:"2"}},[n("div",{staticClass:"locale-changer",staticStyle:{"margin-left":"20px"}},[n("span",[t._v(t._s(t.$t("components.UserSettings.Language")))]),n("div",[n($t["a"],{attrs:{items:t.langs},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.item;return[n("img",{staticStyle:{width:"25px",height:"25px","margin-right":"5px"},attrs:{src:s.image}}),t._v(" "+t._s(s.text)+" ")]}},{key:"item",fn:function(e){var s=e.item;return[n("img",{staticStyle:{width:"25px",height:"25px","margin-right":"5px"},attrs:{src:s.image}}),t._v(" "+t._s(s.text)+" ")]}}]),model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}})],1)])])],1)],1)],1),n(m["b"],[n(T["a"]),n(u["a"],{attrs:{color:"primary"},on:{click:t.updateSettings}},[t._v(t._s(t.$t("components.UserSettings.Submit")))])],1)],1)],1)},ca=[],ua={name:"UserSettings",data:function(){return{langs:[{text:"english",value:"en",image:n("7e71")},{text:"français",value:"fr",image:n("7e35")},{text:"chinese",value:"zh",image:n("3e50")}]}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}})),methods:{updateSettings:function(){this.$store.commit("updateSettings")}}},da=ua,ma=Object(O["a"])(da,la,ca,!1,null,"a04ba51a",null),ha=ma.exports,fa={name:"Settings",components:{UserSettings:ha,CommonSettings:ra}},pa=fa,ga=Object(O["a"])(pa,ta,ea,!1,null,"40adf82e",null),ba=ga.exports,va=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n("ConformityTable")],1)],1)],1)},_a=[],ya=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("components.ConformityTable.Conformity"))+" "),n(T["a"]),n($["a"],{staticClass:"search",attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.ConformityTable.table.sortBy,"sort-desc":t.settings.ConformityTable.table.sortDesc,"items-per-page":t.settings.ConformityTable.table.itemsPerPage,"item-key":"minion_id",headers:t.headers,items:t.conformity,search:t.search,loading:t.loading},on:{"update:sortBy":function(e){return t.$set(t.settings.ConformityTable.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.ConformityTable.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.ConformityTable.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.ConformityTable.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.ConformityTable.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.ConformityTable.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"item.minion_id",fn:function(e){var s=e.item;return[n(u["a"],{staticClass:"text-none",attrs:{text:"",small:"",to:"/conformity/"+s.minion_id}},[t._v(t._s(s.minion_id))])]}},{key:"item.last_highstate",fn:function(e){var n=e.item;return[t._v(" "+t._s(null===n.last_highstate?"":new Date(n.last_highstate).toLocaleString("en-GB"))+" ")]}},{key:"item.conformity",fn:function(e){var s=e.item;return[n(Ot["a"],{attrs:{color:t.boolRepr(s.conformity),dark:""}},[t._v(t._s(t.$t("components.ConformityTable."+s.conformity))+" ")])]}},{key:"item.succeeded",fn:function(e){var s=e.item;return[null!=s.succeeded?n(Ot["a"],{staticClass:"ma-2",attrs:{label:"",outlined:"",color:"green","text-color":"base"}},[t._v(" "+t._s(s.succeeded)+" ")]):t._e()]}},{key:"item.unchanged",fn:function(e){var s=e.item;return[null!=s.unchanged?n(Ot["a"],{staticClass:"ma-2",attrs:{label:"",outlined:"",color:"orange","text-color":"base"}},[t._v(" "+t._s(s.unchanged)+" ")]):t._e()]}},{key:"item.failed",fn:function(e){var s=e.item;return[null!=s.failed?n(Ot["a"],{staticClass:"ma-2",attrs:{label:"",outlined:"",color:"red","text-color":"base"}},[t._v(" "+t._s(s.failed)+" ")]):t._e()]}},{key:"item.action",fn:function(e){var s=e.item;return[n("div",{staticClass:"text-center"},[n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"blue",tile:"",dark:"",to:"/conformity/"+s.minion_id}},[t._v(" "+t._s(t.$t("components.ConformityTable.detail"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"orange",tile:"",dark:"",to:"/run?tgt="+s.minion_id+"&fun=state.apply"}},[t._v(" "+t._s(t.$t("components.ConformityTable.highstate"))+" ")])],1)]}}])})],1)],1)},Ca=[],ka={name:"ConformityTable",data:function(){return{search:"",headers:[],conformity:[],loading:!0}},mounted:function(){this.loadData()},methods:{updateSettings:function(){this.$store.commit("updateSettings")},loadData:function(){var t=this;this.$http.get("api/conformity/render/").then(function(e){t.headers=e.data.name.map(function(t){return Object(A["a"])(Object(A["a"])({},t),{},{text:t.text})}),t.headers.push({text:t.$i18n.t("components.ConformityTable.Actions"),value:"action",sortable:!1}),t.conformity=e.data.data,t.loading=!1})},boolRepr:function(t){return"True"===t?"green":"False"===t?"red":"primary"}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}}))},Sa=ka,Ta=Object(O["a"])(Sa,ya,Ca,!1,null,"9055bfee",null),$a=Ta.exports,xa={name:"Conformity",components:{ConformityTable:$a}},wa=xa,ja=Object(O["a"])(wa,va,_a,!1,null,"23e37da4",null),Da=ja.exports,Aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12",lg:"4"}},[n("ConformityCard",{attrs:{minion_id:t.minion_id,conformity:t.conformity,custom_conformity:t.custom_conformity}})],1),n(ht["a"],{attrs:{sm:"12",lg:"8"}},[n("ConformityDetailCard",{attrs:{succeeded:t.succeeded,unchanged:t.unchanged,failed:t.failed}})],1)],1)],1)},Ma=[],Ra=n("cd55"),Ja=n("49e2"),Ua=n("c865"),Pa=n("0393"),Oa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("components.ConformityDetailCard.HighstateConformity"))+" "),n(T["a"]),n(Ze["a"],{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.succeeded).length>0,expression:"Object.keys(succeeded).length>0"}],staticClass:"mb-0 mt-0",attrs:{color:"green",label:t.$t("components.ConformityTable.Succeeded")+": "+Object.keys(t.succeeded).length},model:{value:t.succeeded_checkbox,callback:function(e){t.succeeded_checkbox=e},expression:"succeeded_checkbox"}}),n(Ze["a"],{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.unchanged).length>0,expression:"Object.keys(unchanged).length>0"}],staticClass:"ml-3 mb-0 mt-0",attrs:{color:"orange",label:t.$t("components.ConformityTable.Unchanged")+": "+Object.keys(t.unchanged).length},model:{value:t.unchanged_checkbox,callback:function(e){t.unchanged_checkbox=e},expression:"unchanged_checkbox"}}),n(Ze["a"],{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.failed).length>0,expression:"Object.keys(failed).length>0"}],staticClass:"ml-3 mb-0 mt-0",attrs:{color:"red",label:t.$t("components.ConformityTable.Failed")+": "+Object.keys(t.failed).length},model:{value:t.failed_checkbox,callback:function(e){t.failed_checkbox=e},expression:"failed_checkbox"}})],1),n(Pa["a"],t._l(t.succeeded,function(e,s){return t.succeeded_checkbox?n(Ra["a"],{key:s,attrs:{dark:""}},[n(Ua["a"],{scopedSlots:t._u([{key:"actions",fn:function(){return[n(p["a"],{attrs:{color:"green"}},[t._v("$vuetify.icons.expand")])]},proxy:!0}],null,!0)},[t._v(t._s(s)+" ")]),n(Ja["a"],{domProps:{innerHTML:t._s(e)}})],1):t._e()}),1),n(Pa["a"],t._l(t.unchanged,function(e,s){return t.unchanged_checkbox?n(Ra["a"],{key:s},[n(Ua["a"],{scopedSlots:t._u([{key:"actions",fn:function(){return[n(p["a"],{attrs:{color:"orange"}},[t._v("$vuetify.icons.expand")])]},proxy:!0}],null,!0)},[t._v(t._s(s)+" ")]),n(Ja["a"],{domProps:{innerHTML:t._s(e)}})],1):t._e()}),1),n(Pa["a"],t._l(t.failed,function(e,s){return t.failed_checkbox?n(Ra["a"],{key:s},[n(Ua["a"],{scopedSlots:t._u([{key:"actions",fn:function(){return[n(p["a"],{attrs:{color:"red"}},[t._v("$vuetify.icons.expand")])]},proxy:!0}],null,!0)},[t._v(t._s(s)+" ")]),n(Ja["a"],{domProps:{innerHTML:t._s(e)}})],1):t._e()}),1)],1)],1)},Ia=[],Fa={name:"ConformityDetailCard",props:["succeeded","unchanged","failed"],data:function(){return{expand_search:!1,succeeded_checkbox:!0,unchanged_checkbox:!0,failed_checkbox:!0}}},Ea=Fa,Na=(n("fc94"),Object(O["a"])(Ea,Oa,Ia,!1,null,"30cfd9c0",null)),La=Na.exports,Ka=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(t._s(t.minion_id))]),n(vt["a"],[n("tbody",[n("tr",[n("td",[t._v(t._s(t.$t("components.ConformityCard.Highstate")))]),n("td",{staticClass:"text-right"},[n(Ot["a"],{attrs:{color:t.boolRepr(t.conformity),dark:""}},[t._v(t._s(t._f("capitalize")(t.$t("components.ConformityCard."+t.valRepr(t.conformity)))))])],1)])]),t._l(t.custom_conformity,function(e){return n("tbody",{key:e.key},t._l(e,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(t.$t(s)))]),n("td",{staticClass:"text-right"},[t.isBool(e)?n(Ot["a"],{attrs:{color:t.boolRepr(t.conformity),dark:""}},[t._v(t._s(t._f("capitalize")(t.valRepr(t.$t(t.conformity))))+" ")]):n("span",[t._v(t._s(t.valRepr(e)))])],1)])}),0)})],2)],1)],1)},Ha=[],za={name:"ConformityCard",props:["minion_id","conformity","custom_conformity"],data:function(){return{}},methods:{boolRepr:function(t){return!0===t?"green":!1===t?"red":"primary"},isBool:function(t){return"boolean"===typeof t},valRepr:function(t){return null===t?"unknown":t}},filters:{capitalize:function(t){return t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)}}},Ba=za,qa=Object(O["a"])(Ba,Ka,Ha,!1,null,"207a8230",null),Ga=qa.exports,Va={name:"ConformityDetail",props:["minion_id"],components:{ConformityCard:Ga,ConformityDetailCard:La},data:function(){return{conformity:"",succeeded:{},unchanged:{},failed:{},custom_conformity:[]}},mounted:function(){this.loadConformity()},methods:{loadConformity:function(){var t=this;this.$http.get("api/minions/".concat(this.minion_id,"/conformity_detail/")).then(function(e){t.conformity=e.data.conformity,t.custom_conformity=e.data.custom_conformity,t.succeeded=e.data.succeeded,t.unchanged=e.data.unchanged,t.failed=e.data.failed})}}},Wa=Va,Xa=Object(O["a"])(Wa,Aa,Ma,!1,null,"aeee6056",null),Ya=Xa.exports,Za=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n("UserCard")],1)},Qa=[],ti=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n(d["a"],[n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.UserCard.table.sortBy,"sort-desc":t.settings.UserCard.table.sortDesc,"items-per-page":t.settings.UserCard.table.itemsPerPage,headers:t.headers,items:t.users},on:{"update:sortBy":function(e){return t.$set(t.settings.UserCard.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.UserCard.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.UserCard.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.UserCard.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.UserCard.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.UserCard.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"top",fn:function(){return[n(de["a"],{attrs:{flat:""}},[n(x["c"],{staticClass:"headline"},[t._v(t._s(t.$t("components.mixins.UserCard.Users")))]),n("div",{staticClass:"flex-grow-1"}),n(Qe["a"],{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[n(u["a"],t._g({staticClass:"mb-2",attrs:{color:"primary",dark:"",disabled:!t.isStaff},on:{click:function(e){t.user={}}}},s),[t._v(t._s(t.$t("components.mixins.UserCard.Create")))])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n(d["a"],[n(m["e"],[t._v(t._s(!0===t.editing?""+t.$t("components.mixins.UserCard.UpdateUser"):""+t.$t("components.mixins.UserCard.CreateUser")))]),n(m["d"],[n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{lg:"6"}},[n($["a"],{attrs:{label:t.$t("components.mixins.UserCard.Username"),rules:t.userRules,required:""},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),n(ht["a"],{attrs:{lg:"6"}},[n($["a"],{attrs:{label:t.$t("components.mixins.UserCard.Email"),rules:t.emailRules,required:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1)],1),n(pt["a"],[n(ht["a"],{attrs:{lg:"6"}},[n($["a"],{attrs:{label:t.$t("components.mixins.UserCard.FirstName")},model:{value:t.user.first_name,callback:function(e){t.$set(t.user,"first_name",e)},expression:"user.first_name"}})],1),n(ht["a"],{attrs:{lg:"6"}},[n($["a"],{attrs:{label:t.$t("components.mixins.UserCard.LastName")},model:{value:t.user.last_name,callback:function(e){t.$set(t.user,"last_name",e)},expression:"user.last_name"}})],1)],1),n(pt["a"],[n(ht["a"],{attrs:{lg:"6"}},[n($["a"],{attrs:{"append-icon":t.show?"visibility":"visibility_off",type:t.show?"text":"password",name:"input-10-1",label:t.$t("components.mixins.UserCard.Password"),counter:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),n(ht["a"],{attrs:{lg:"6"}},[n(Ze["a"],{attrs:{label:t.$t("components.mixins.UserCard.StaffUser"),disabled:!t.isStaff},model:{value:t.user.is_staff,callback:function(e){t.$set(t.user,"is_staff",e)},expression:"user.is_staff"}})],1)],1)],1)],1),n(m["b"],[n(T["a"]),t.editing?n(u["a"],{attrs:{color:"primary"},on:{click:t.resetUser}},[t._v(t._s(t.$t("components.mixins.UserCard.Discard")))]):t._e(),t.editing?n(u["a"],{attrs:{color:"warning"},on:{click:t.updateUser}},[t._v(t._s(t.$t("components.mixins.UserCard.Update")))]):t._e(),t.editing?t._e():n(u["a"],{attrs:{color:"warning",disabled:null==t.user.username||""==t.user.email},on:{click:t.createUser}},[t._v(t._s(t.$t("components.mixins.UserCard.Create"))+" ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.is_staff",fn:function(e){var s=e.item;return[s.is_staff?n(Ot["a"],{attrs:{color:"primary",dark:""}},[t._v(t._s(s.is_staff))]):t._e()]}},{key:"item.token",fn:function(e){var s=e.item;return[n("div",{staticClass:"text-center"},[n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"primary",tile:"",dark:""},on:{click:function(e){return t.showToken(s)}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.View"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"orange",tile:"",dark:""},on:{click:function(e){return t.manageToken("renew",s)}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Renew"))+" ")]),n(u["a"],{attrs:{small:"",color:"red",tile:"",dark:"",disabled:String(s.id)===t.currentUserId},on:{click:function(e){return t.manageToken("revoke",s)}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Revoke"))+" ")])],1)]}},{key:"item.date_joined",fn:function(e){var n=e.item;return[t._v(" "+t._s(new Date(n.date_joined).toLocaleString("en-GB"))+" ")]}},{key:"item.action",fn:function(e){var s=e.item;return[n("div",{staticClass:"text-center"},[n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"orange",tile:"",dark:""},on:{click:function(e){return t.editUser(s)}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Update"))+" ")]),n(u["a"],{attrs:{small:"",color:"red",tile:"",dark:"",disabled:String(s.id)===t.currentUserId},on:{click:function(e){return t.confirmDelete(s)}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Delete"))+" ")])],1)]}}])})],1)],1)],1),n("div",{staticClass:"text-center"},[n(Qe["a"],{attrs:{width:"500"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[n(d["a"],[n(m["e"],{staticClass:"headline red",attrs:{"primary-title":""}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Delete"))+" "+t._s(t.user.username)+" ? ")]),n(m["d"],[n("br"),t._v(" "+t._s(t.$t("components.mixins.UserCard.ActionMsg"))+" ")]),n(h["a"]),n(m["b"],[n(T["a"]),n(u["a"],{attrs:{color:"primary",text:""},on:{click:function(e){t.dialogDelete=!1}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Close"))+" ")]),n(u["a"],{attrs:{color:"red",text:""},on:{click:function(e){return t.deleteUser(t.user.id)}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Delete"))+" ")])],1)],1)],1)],1),n("div",{staticClass:"text-center"},[n(Qe["a"],{attrs:{width:"500"},model:{value:t.dialogToken,callback:function(e){t.dialogToken=e},expression:"dialogToken"}},[n(d["a"],[n(m["e"],{staticClass:"headline primary",attrs:{"primary-title":""}},[t._v(" "+t._s(t.user.username)+" "+t._s(t.$t("components.mixins.UserCard.Token"))+" ")]),t.user.user_settings?n(m["d"],[n("br"),t._v(" "+t._s(t.user.user_settings.token)+" ")]):t._e(),n(h["a"]),n(m["b"],[n(T["a"]),n(u["a"],{attrs:{color:"primary",text:""},on:{click:function(e){t.dialogToken=!1}}},[t._v(" "+t._s(t.$t("components.mixins.UserCard.Close"))+" ")])],1)],1)],1)],1)],1)},ei=[],ni={name:"UserCard",data:function(){var t=this;return{search:"",headers:[{text:this.$t("components.mixins.UserCard.Username"),value:"username"},{text:this.$t("components.mixins.UserCard.FirstName"),value:"first_name"},{text:this.$t("components.mixins.UserCard.LastName"),value:"last_name"},{text:this.$t("components.mixins.UserCard.Email"),value:"email"},{text:this.$t("components.mixins.UserCard.StaffUser"),value:"is_staff"},{text:this.$t("components.mixins.UserCard.Token"),value:"token",sortable:!1},{text:this.$t("components.mixins.UserCard.DateJoined"),value:"date_joined"},{text:this.$t("components.mixins.UserCard.Action"),value:"action",sortable:!1}],userRules:[function(e){return!!e||t.$t("components.mixins.UserCard.UsernameRequired")}],emailRules:[function(e){return!!e||t.$t("components.mixins.UserCard.EmailRequired")},function(e){return/.+@.+/.test(e)||t.$t("components.mixins.UserCard.EmailValid")}],users:[],user:{},editing:!1,show:!1,dialog:!1,dialogDelete:!1,dialogToken:!1}},mounted:function(){this.getUsers()},computed:Object(A["a"])({currentUserId:function(){return this.$store.state.id},isStaff:function(){return JSON.parse(this.$store.getters.isStaff)||!1}},Object(M["b"])({settings:function(t){return t.settings}})),methods:{updateSettings:function(){this.$store.commit("updateSettings")},getUsers:function(){var t=this;this.$http.get("api/users/").then(function(e){t.users=e.data}).catch(function(e){t.$toast.error(e.response.data)})},createUser:function(){var t=this,e=new FormData;Object.keys(this.user).forEach(function(n){return e.append(n,t.user[n])}),this.$http.post("api/users/",e).then(function(){t.$toast(t.$i18n.t("components.mixins.UserCard.UserCreated")),t.dialog=!1}).then(function(){t.user={},t.getUsers()}).catch(function(e){t.dialog=!1,t.user={},t.$toast.error(e.response.data)})},updateUser:function(){var t=this;this.editing=!1;var e=new FormData;e.set("username",this.user.username||""),e.set("email",this.user.email||""),e.set("first_name",this.user.first_name||""),e.set("last_name",this.user.last_name||""),e.set("password",this.user.password||""),e.set("is_staff",this.user.is_staff),this.$http.patch("api/users/".concat(this.user.id,"/"),e).then(function(){t.$toast(t.$i18n.t("components.mixins.UserCard.UserUpdated")),t.dialog=!1,t.user={}}).then(function(){t.getUsers()}).catch(function(e){t.dialog=!1,t.user={},t.$toast.error(e.response.data)})},showToken:function(t){this.dialogToken=!0,this.user=t},manageToken:function(t,e){var n=this,s=new FormData;s.set("action",t),this.$http.post("api/users/".concat(e.id,"/manage_token/"),s).then(function(t){n.$toast(t.data.result)}).then(function(){n.getUsers()}).catch(function(t){n.$toast.error(t.response.data)})},confirmDelete:function(t){this.dialogDelete=!0,this.user=t},deleteUser:function(t){var e=this;this.$http.delete("api/users/"+t).then(function(){e.dialogDelete=!1,e.$toast(e.$i18n.t("components.mixins.UserCard.UserDeleted"))}).then(function(){e.getUsers()}).catch(function(t){e.$toast.error(t.response.data)})},editUser:function(t){this.dialog=!0,this.editing=!0,this.user=t},resetUser:function(){this.dialog=!1,this.editing=!1,this.user={}}}},si=ni,ai=Object(O["a"])(si,ti,ei,!1,null,"5fa4d677",null),ii=ai.exports,oi={name:"Users",components:{UserCard:ii}},ri=oi,li=Object(O["a"])(ri,Za,Qa,!1,null,"289b5c53",null),ci=li.exports,ui=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12"}},[n("ScheduleTable",{key:t.refreshKey}),t.fabs?n("Fab",{attrs:{fabs:t.fabs},on:{fab_action:t.fabAction}}):t._e()],1)],1)],1)},di=[],mi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("components.ScheduleTable.Schedules"))+" "),n(T["a"]),n($["a"],{staticClass:"search",attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.ScheduleTable.table.sortBy,"sort-desc":t.settings.ScheduleTable.table.sortDesc,"items-per-page":t.settings.ScheduleTable.table.itemsPerPage,headers:t.headers,items:t.schedules,search:t.search,loading:t.loading},on:{"update:sortBy":function(e){return t.$set(t.settings.ScheduleTable.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.ScheduleTable.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.ScheduleTable.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.ScheduleTable.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.ScheduleTable.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.ScheduleTable.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"item.enabled",fn:function(e){var s=e.item;return[n(Ot["a"],{attrs:{color:t.boolRepr(s.enabled),dark:""}},[t._v(t._s(s.enabled))])]}},{key:"item.action",fn:function(e){var s=e.item;return[n("div",{staticClass:"text-center"},[n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:s.enabled?"orange":"green",tile:"",dark:""},on:{click:function(e){return t.manageSchedule(s.enabled?"disable_job":"enable_job",s.name,s.minion)}}},[t._v(" "+t._s(s.enabled?""+t.$t("components.ScheduleTable.Disable"):""+t.$t("components.ScheduleTable.Enable"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"red",tile:"",dark:""},on:{click:function(e){return t.manageSchedule("delete",s.name,s.minion)}}},[t._v(" "+t._s(t.$t("components.ScheduleTable.Delete"))+" ")])],1)]}}])})],1)],1)},hi=[],fi=(n("6062"),{name:"ScheduleTable",data:function(){return{search:"",headers:[],schedules:[],loading:!0}},methods:{updateSettings:function(){this.$store.commit("updateSettings")},loadData:function(){var t=this;this.loading=!1,this.$http.get("api/schedules/").then(function(e){if(t.schedules=e.data,t.schedules.length>0){var n=new Set(["minion","name","function"]);t.schedules.forEach(function(t){Object.keys(t).forEach(function(t){n.add(t)})}),n.delete("id"),n.forEach(function(e){t.headers.push({text:e,value:e})}),t.headers.push({text:"action",value:"action"})}})},manageSchedule:function(t,e,n){var s=this;this.$toast(this.$i18n.t("components.ScheduleTable.MinionJobAction",[t,n,e]));var a=new FormData;a.set("action",t),a.set("name",e),a.set("minion",n),this.$http.post("api/schedules/manage/",a).then(function(){s.$toast(s.$i18n.t("components.ScheduleTable.MinionJobActionDone",[t,n,e]))}).then(function(){s.headers=[],s.schedules=[],s.loadData()}).catch(function(t){s.$toast.error(t.response.data)})},boolRepr:function(t){return!0===t?"green":!1===t?"red":"primary"}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}})),mounted:function(){this.loadData()}}),pi=fi,gi=Object(O["a"])(pi,mi,hi,!1,null,"03fbfb96",null),bi=gi.exports,vi={name:"Schedules",components:{Fab:Be,ScheduleTable:bi},data:function(){return{fabs:[{color:"pink",action:"refreshSchedules",icon:"refresh",tooltip:this.$i18n.t("components.Schedules.Refresh")}],refreshKey:0}},methods:{fabAction:function(t){this[t]()},refreshSchedules:function(){var t=this;this.$toast(this.$i18n.t("components.Schedules.Refreshing")),this.$http.post("/api/schedules/refresh/").then(function(){t.refreshKey+=1,t.$toast(t.$i18n.t("components.Schedules.Refreshed"))}).catch(function(e){t.$toast.error(e.response.data)})}}},_i=vi,yi=Object(O["a"])(_i,ui,di,!1,null,"78b5a4a6",null),Ci=yi.exports,ki=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{cols:"4",offset:"4"}},[n(d["a"],[n(m["e"],{staticClass:"black white--text subheading",attrs:{"primary-title":""}},[n("span",{staticClass:"title"},[t._v(t._s(t.$t("components.NotFound.Title")))])]),n(m["d"],{staticClass:"display-1 ma-7 text-center"},[t._v(" "+t._s(t.$t("components.NotFound.404"))+" ")]),n(m["b"],[n(u["a"],{staticClass:"primary darken-3 white--text",attrs:{text:"",to:"/"}},[n(p["a"],{attrs:{left:""}},[t._v("arrow_back")]),t._v(" "+t._s(t.$t("components.NotFound.Back"))+" ")],1)],1)],1)],1)],1)],1)},Si=[],Ti={name:"NotFound"},$i=Ti,xi=Object(O["a"])($i,ki,Si,!1,null,"7c912228",null),wi=xi.exports,ji=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[0===t.jobs.length&&0===t.minions.length?n(ht["a"],{attrs:{sm:"12"}},[n(ft["a"],{attrs:{fluid:""}},[n("p",{staticClass:"display-2 text-center"},[t._v(t._s(t.$t("views.Search.NoResult")))])])],1):t._e(),t.jobs.length>0?n(ht["a"],{attrs:{sm:"12"}},[n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("views.Search.Jobs"))+" "),n(T["a"]),n($["a"],{attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.job_search,callback:function(e){t.job_search=e},expression:"job_search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":"jid","sort-desc":"",headers:t.jobs_headers,items:t.jobs,search:t.search,"items-per-page":5},scopedSlots:t._u([{key:"item.jid",fn:function(e){var s=e.item;return[n(u["a"],{staticClass:"text-none",class:s.jid.includes(t.query)?"red":"",attrs:{text:"",small:"",to:"/jobs/"+s.jid+"/"+s.id}},[t._v(t._s(s.jid)+" ")])]}},{key:"item.fun",fn:function(e){var s=e.item;return[n("span",{class:s.fun.includes(t.query)?"red":""},[t._v(t._s(s.fun))])]}},{key:"item.arguments",fn:function(e){var n=e.item;return[t._v(" "+t._s(n.arguments.length>20?n.arguments.slice(0,20)+"...":n.arguments)+" ")]}},{key:"item.success",fn:function(e){var s=e.item;return[n(Ot["a"],{attrs:{color:t.boolRepr(s.success),dark:""}},[t._v(t._s(t.boolText(s.success)))])]}},{key:"item.alter_time",fn:function(e){var n=e.item;return[t._v(" "+t._s(new Date(n.alter_time).toLocaleString("en-GB"))+" ")]}}],null,!1,2247714651)})],1)],1)],1):t._e(),t.minions.length>0?n(ht["a"],{attrs:{sm:"12"}},[n(ft["a"],{attrs:{fluid:""}},[n(d["a"],[n(m["e"],[t._v(" Minions "),n(T["a"]),n($["a"],{attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{headers:t.minions_headers,items:t.minions,"items-per-page":5},scopedSlots:t._u([{key:"item.minion_id",fn:function(e){var s=e.item;return[n(u["a"],{staticClass:"text-none",class:s.minion_id.includes(t.query)?"red":"",attrs:{text:"",small:"",to:"/minions/"+s.minion_id}},[t._v(t._s(s.minion_id)+" ")])]}},{key:"item.conformity",fn:function(e){var s=e.item;return[n(Ot["a"],{attrs:{color:t.boolRepr(s.conformity),dark:""}},[t._v(t._s(null==s.conformity?"unknown":s.conformity)+" ")])]}},{key:"item.last_job",fn:function(e){var n=e.item;return[t._v(" "+t._s(null===n.last_job?"":new Date(n.last_job).toLocaleString("en-GB"))+" ")]}},{key:"item.last_highstate",fn:function(e){var n=e.item;return[t._v(" "+t._s(null===n.last_highstate?"":new Date(n.last_highstate).toLocaleString("en-GB"))+" ")]}}],null,!1,657946555)})],1)],1)],1):t._e()],1)],1)},Di=[],Ai={name:"Search",data:function(){return{query:null,jobs:[],jobs_headers:[{text:"Jid",value:"jid"},{text:"Target",value:"id"},{text:"Function",value:"fun"},{text:"Arguments",value:"arguments"},{text:"User",value:"user"},{text:"Status",value:"success"},{text:"Date",value:"alter_time"}],job_search:"",minions:[],minions_headers:[{text:"Minion Id",value:"minion_id"},{text:"Highstate Conformity",value:"conformity"},{text:"F.Q.D.N",value:"fqdn"},{text:"O.S",value:"os"},{text:"O.S Version",value:"oscodename"},{text:"Kernel",value:"kernelrelease"},{text:"Last Job",value:"last_job"},{text:"Last Highstate",value:"last_highstate"}]}},created:function(){this.query=this.$route.query.q},mounted:function(){this.searchBar()},methods:{searchBar:function(){var t=this;this.$http.get("api/search/?q="+this.query).then(function(e){function n(t){return t.forEach(function(t){var e=JSON.parse(t.grain);for(var n in e)t[n]=e[n]}),t}t.jobs=e.data.jobs,t.minions=n(e.data.minions)})},boolRepr:function(t){return!0===t?"green":"red"},boolText:function(t){return!0===t?this.$t("views.Search.Success"):this.$t("views.Search.Failed")}}},Mi=Ai,Ri=Object(O["a"])(Mi,ji,Di,!1,null,"39afe920",null),Ji=Ri.exports,Ui=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],[n(ht["a"],{attrs:{sm:"12",cols:"12"}},[n("JobTemplatesTable")],1)],1)],1)},Pi=[],Oi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(ft["a"],{attrs:{fluid:""}},[n(pt["a"],{attrs:{"no-gutters":""}},[n(ht["a"],{attrs:{sm:"12"}},[n(d["a"],[n(m["e"],[t._v(" "+t._s(t.$t("components.JobTemplatesTable.JobTemplate"))+" "),n(T["a"]),n($["a"],{staticClass:"search",attrs:{"append-icon":"search",label:t.$t("common.Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n(Yt["a"],{staticClass:"elevation-1",attrs:{"sort-by":t.settings.JobTemplatesTable.table.sortBy,"sort-desc":t.settings.JobTemplatesTable.table.sortDesc,"items-per-page":t.settings.JobTemplatesTable.table.itemsPerPage,headers:t.headers,items:t.job_templates,search:t.search,loading:t.loading},on:{"update:sortBy":function(e){return t.$set(t.settings.JobTemplatesTable.table,"sortBy",e)},"update:sort-by":[function(e){return t.$set(t.settings.JobTemplatesTable.table,"sortBy",e)},t.updateSettings],"update:sortDesc":function(e){return t.$set(t.settings.JobTemplatesTable.table,"sortDesc",e)},"update:sort-desc":[function(e){return t.$set(t.settings.JobTemplatesTable.table,"sortDesc",e)},t.updateSettings],"update:itemsPerPage":function(e){return t.$set(t.settings.JobTemplatesTable.table,"itemsPerPage",e)},"update:items-per-page":[function(e){return t.$set(t.settings.JobTemplatesTable.table,"itemsPerPage",e)},t.updateSettings]},scopedSlots:t._u([{key:"item.name",fn:function(e){var s=e.item;return[n("b",[t._v(t._s(s.name))])]}},{key:"item.action",fn:function(e){var s=e.item;return[n("div",{staticClass:"text-center"},[n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"blue-grey",tile:"",dark:"",to:t.computeUrl(s,!1)}},[t._v(" "+t._s(t.$t("components.JobTemplatesTable.Run"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"orange",tile:"",dark:"",to:t.computeUrl(s,!0)}},[t._v(" "+t._s(t.$t("components.JobTemplatesTable.Edit"))+" ")]),n(u["a"],{staticClass:"ma-2",attrs:{small:"",color:"red",tile:"",dark:""},on:{click:function(e){return t.deleteTemplate(s.id)}}},[t._v(" "+t._s(t.$t("components.JobTemplatesTable.Delete"))+" ")])],1)]}}])})],1)],1)],1)],1)},Ii=[],Fi=(n("9861"),n("88a7"),n("271a"),n("5494"),{name:"JobTemplatesTable",data:function(){return{search:"",headers:[{text:this.$t("components.JobTemplatesTable.Name"),value:"name"},{text:this.$t("components.JobTemplatesTable.Client"),value:"client"},{text:this.$t("components.JobTemplatesTable.TargetType"),value:"tgt_type"},{text:this.$t("components.JobTemplatesTable.Target"),value:"tgt"},{text:this.$t("components.JobTemplatesTable.Function"),value:"fun"},{text:this.$t("components.JobTemplatesTable.Arguments"),value:"arg"},{text:this.$t("components.JobTemplatesTable.KeywordArguments"),value:"kwarg"},{text:this.$t("components.JobTemplatesTable.Batch"),value:"batch"},{text:this.$t("components.JobTemplatesTable.Actions"),value:"action",sortable:!1}],loading:!0,job_templates:[]}},mounted:function(){this.loadData()},methods:{updateSettings:function(){this.$store.commit("updateSettings")},loadData:function(){var t=this;this.$http.get("api/job_templates/").then(function(e){var n=e.data;n.forEach(function(t){var e=JSON.parse(t.job);Object.keys(e).forEach(function(n){if("arg"===n){var s=e[n],a=s.filter(function(t){return t.includes("=")});s=s.filter(function(t){return!t.includes("=")}),t[n]=s.join(" "),t["kwarg"]=a.join(" ")}else t[n]=e[n]}),delete t.job}),t.job_templates=n,t.loading=!1})},deleteTemplate:function(t){var e=this;this.$http.delete("api/job_templates/".concat(t,"/")).then(function(t){e.$toast(e.$i18n.t("components.JobTemplatesTable.TemplateDeleted"))}).then(function(){e.loadData()})},computeUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new URLSearchParams(t);return n.delete("id"),e||n.delete("name"),"/run?"+n.toString()}},computed:Object(A["a"])({},Object(M["b"])({settings:function(t){return t.settings}}))}),Ei=Fi,Ni=Object(O["a"])(Ei,Oi,Ii,!1,null,"3b2abbb6",null),Li=Ni.exports,Ki={name:"JobTemplates",components:{JobTemplatesTable:Li}},Hi=Ki,zi=Object(O["a"])(Hi,Ui,Pi,!1,null,"13972fd9",null),Bi=zi.exports;s["default"].use(rt["a"]);var qi=new rt["a"]({routes:[{path:"/",name:"home",component:le},{path:"/minions",name:"minions",component:un},{path:"/minions/:minion_id",name:"minion_detail",component:Bn,props:!0},{path:"/jobs",name:"jobs",component:Ae},{path:"/jobs/:jid",name:"job_jid",component:Ae,props:!0},{path:"/jobs/:jid/:minion_id",name:"job_detail",component:Yn,props:!0},{path:"/run",name:"run",component:Qs},{path:"/job_templates",name:"job_templates",component:Bi},{path:"/keys",name:"keys",component:We},{path:"/events",name:"events",component:us},{path:"/conformity",name:"conformity",component:Da},{path:"/conformity/:minion_id",name:"conformity_detail",component:Ya,props:!0},{path:"/schedules",name:"schedules",component:Ci},{path:"/users",name:"users",component:ci},{path:"/settings",name:"settings",component:ba},{path:"/search",name:"search",component:Ji},{path:"/login",name:"Login",component:Te,meta:{plainLayout:!0}},{path:"*",component:wi}]});qi.beforeEach(function(t,e,n){mt.getters.isLoggedIn||"/login"===t.path?"/login"===t.path&&mt.getters.isLoggedIn?n("/"):n():n("/login")});var Gi=qi,Vi=n("04e1"),Wi=n.n(Vi),Xi=n("a925");s["default"].config.productionTip=!1,s["default"].use(Xi["a"]);var Yi=Object.assign(it),Zi=new Xi["a"]({locale:at,messages:Yi});s["default"].prototype.$http=dt.a,s["default"].prototype.$http.defaults.xsrfCookieName="csrftoken",s["default"].prototype.$http.defaults.xsrfHeaderName="X-CSRFToken",s["default"].prototype.$http.defaults.headers.common["Content-Type"]="application/json";var Qi=localStorage.getItem("access");Qi&&(s["default"].prototype.$http.defaults.headers.common.Authorization="Bearer ".concat(Qi),s["default"].prototype.$http.defaults.withCredentials=!0);var to=!1,eo=[],no=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;eo.forEach(function(n){t?n.reject(t):n.resolve(e)}),eo=[]};s["default"].prototype.$http.interceptors.request.use(function(t){var e=t,n=window.localStorage.getItem("refresh");return n&&Wi()(n).exp-Math.floor(Date.now()/1e3)<60?mt.dispatch("logout").then(function(){return Gi.push({path:"/login",name:"Login"})}):e},function(t){return Promise.reject(t)}),s["default"].prototype.$http.interceptors.request.use(function(t){var e=t,n=window.localStorage.getItem("access");if(n&&Wi()(n).exp>Math.floor(Date.now()/1e3))return e;if(t.url.includes("login")||t.url.includes("token")||t.url.includes("social"))return e;if(to)return new Promise(function(t,e){eo.push({resolve:t,reject:e})}).then(function(t){return e.headers["Authorization"]="Bearer "+t,e}).catch(function(t){return t});to=!0;var a=window.localStorage.getItem("refresh");return new Promise(function(t,n){s["default"].prototype.$http.post("/api/token/refresh/",{refresh:a}).then(function(n){var a=n.data;window.localStorage.setItem("access",a.access),s["default"].prototype.$http.defaults.headers.common["Authorization"]="Bearer "+a.access,e.headers["Authorization"]="Bearer "+a.access,no(null,a.access),t(e)}).catch(function(t){no(t,null),n(t)}).then(function(){to=!1})})},function(t){return Promise.reject(t)}),new s["default"]({i18n:Zi,vuetify:ot,router:Gi,store:mt,render:function(t){return t(V)}}).$mount("#app")},6774:function(t,e,n){},"7e35":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAABiVBMVEUAAADtKTkAI5UAI5XtKTkAI5UAI5XtKTkAI5UAI5XtKTkAI5VfJXjtKTkAI5UAI5UAI5XtKTkAI5XtKTkAI5UAI5XtKTntKTn///8AI5XtKTkAI5XtKTkAI5XtKTntKTn////tKTn///////8AI5XtKTkAI5UAI5UAI5XtKTn////tKTn///////8AI5X///8AI5XtKTkAI5XtKTntKTkAI5XtKTntKTn///8AI5X///8AI5XtKTn///8AI5XtKTntKTkAI5UAI5XtKTkAI5XtKTntKTn////tKTkAI5UAI5X////tKTntKTn///8AH5P///////////8AI5X////tKTntKTkAI5XtKTntKTkAI5XtKTkAI5X////tKTntKTn////////////tKTkAI5XtJDT////////////////////tKTn////Stsz////////tKTntKTntKTntKTkAI5Wptdv5t7z////tKTn///8AI5UAI5X////tKTkAI5Wptdv5t7wAGZDsHzCgEbCYAAAAfHRSTlMA7vTvEOiBe0UP89MDgR0I/uLPz2dNTUIR7efjRhMMCevUxqSgUwuMUxXt6+bg2tnIvaagl5SMaUxBNzY2MzMoyXx3HRf59efdvbi3qqSZmZOCfWxqZS8lIAfgMy302NLPu7q0rZplWVFHHRsWEAsIxYlwWPnj46iSeVhJT7RohAAAB05JREFUeNrs3YdWE0EYhuEvxSSkEJJQhEAiQkIiinSkdwQBQaUooNh770eZ33Ll4rFEpKXsbmbm572D52x2Nju7OwMre/548Nz9y4sNsydvnj1z+sSp7U6cPnP25snZhsXL988NPn4O/To++OByw8kz17cO7PqZkx8uPRg8Dk063re0ePv8Vg6dv7241Ke6/+mjS7d2qHPw37r06CnU7EXf0uyJrYI6MbvU9wKKdfzcxbNbhnT24jmFfvvPHjac3jKw0w0Pn0GB/L0L77YM7/29Kj/krnTMR9++GE//+l1suschbX5PezWRWXQhbPO1ch76kvJWIjKTvt3IshOyVTe2RmQ6fbtp9xPIVKkrSmQJfbvmV1chS6VNDiLz6Zls3XKMeHWuaiJr6JmaA2kUu+CVKJF19Eyh13EUtVSYyFp6pkgCxWv1LpH19ExzxRrvkq5qKi5d2AIxFCFPmKhY9EyRWlhdXReRDHQhOp2wtM8tJAtd3LDywCebiOShC9Edg0UNtZJcdDGyDksqt5NsdOHtgfmVNBLJRxeiwwmT2wiTnHQRWYGppapJVrqwJWBio0Ty0oVww6yCjSQ3XXTEYUoTMyQ7XbSlYUKrPpKfLuqHYXj9UVKBLkIDMDiPg9SgC1sVDK3CTqrQhbfS0GNuJ3XoYqoWhpWyk0p04U0YeMzVoovJhGHnuWp0MWnI+d5rJ/XowluFgut3kIp0YRtAga1GSU26CA2joCZ8pCpd1KdRQMEZUpcu2uLIv0ZSmS46CpmZUJue/9xFilSniwTyasOhPt2W1zBf4iP16WIzltcQpwM9n6GunPSgix7k2JBdF7p3BTkVDJMudBGJI5eaSB+66EYOecp0ootaZF1JC2lFn3Yi27pIL7roRJb1lulGF1XIqqSPtKPXx5FNLtKPLgLIolKHjvSpYRzeXdKRLu7g0CpIT7qoxCEFfbrS66/h4K6QrvTDbuHqjulLr3EecmHTly4CB1/YdKbbnhx4r6ozXXQfdND1pnvHDzjT9aaLwP7Du+70fQf5MdKdLl5jz5JR/emh2D4z7/rTxTL2yB/mQI/4sTsPcaDvOVXVzoM+h11NOHjQp67ucWXjQd/9poXfx4W+a8qil7jQdw10C3zondhRyTE+9JrYf/OwfOj/zc02cqLP7/y9c6LvuHWtIE70Hb/4BV70zow82MKLPp35V9NfxosuBv552sSM7safLnCjt+F3dQ5udFv67/wMN/rfN+lc/OgB/GqGH73tz79YfvQa5++rOj/67yt7OTGk9+BnXRzp9/CzCxzpI79GOY70ZieAoTKOdLEO4BOxpL8B4OJJDwBo50mfB9DKk/4SCK7xpIfiKLXzpHvHMVTGky7WUUFM6ZUo50pfxihXuhtdXOkf0c6VPo8LXOl30MqV/hJhrvQIWrjSb2CNKz2EY1zpNXzpzajmSrcd0Y/ovOiMhzm29BrOf2kY/5FlfPvC+KaV8VQF4wkqxtOSjCejGT+CYPzgifHjRq4PmafGkYzypIdibF8oGeH7GtEc75fHGL8yyPRF0RXerwczfimc86cAjD8AYfzZD+OPvRh/4sf5w07Gn/My/oib8af7nBdsYLxMB+PFWRgvycN5ISbGy28xXnSN81J7jBdYZLysJufFVBkvoct44WTOy2UzXiSd89L4jDdEYLwNBufNTzCqP92NvZuo1p1uS2OfmnSnvzra1OxoK7ujDQy5b1vJebNSxlvUct6YmPF21Jw3Iee89TxcOtIDyKakTz96fRxZ1VumHb0KWdalG70T2VbSohd92oms85RpRa9FDjXpRO9GLgXD+tAjceTUkF0XuncFOVauC70HOdeoB70DuZf06UDfjCGPNhzq023DyKuU+vQE8mxUdbobedeoNr0D+RecUZneFkcBTfjUpdenUVCrUVXpoWEUWL9DTbptAAXXa1eR7q2CAVXY1aNPVsKQPHbV6JMJGFTqrVr0yTeAcXaV6Jljbsz5rg7dWwlD8zhUoduqYHD9UTXooQEY3qpPBXr9MExoYkZ+elsaphRslJ3eEYdZjcpNd8PEUtXy0m0JmNpGWFZ6ZAUmV9IoJ73DCfMrt8tH9/bAkoZaZaOPrMOikk1y0btjsK7PLfLQb9TC0uq6ZKF3OmF1nrAM9EgtilDSZS823RuIoTht3C0ufW4FxSsVLh49kkBRC16JFoceeh1HsatzVVtPbw6kIUOlTQ5r6bbucchSqStqHb351VXIVN3YmjX0afcTyFZJeav59JFlJ2TM72m3m0n3ztX6IW2rYz6z6JtuuU7x3fl7F94ZT39/r0riA/5jCJCboaxDTX/rKGfkMgwZIGHhp08df+v7WUgwDDGQb1WZpECZtxWSKq3yGYYmyMkMTHQnz9vuiYGZOQxDG0hYhfgpKZAU2Up+IVZDLpXj9L9tepCykm4sfj/H6iqVB6bbDhtfI4G8LFuLtKAAZW+lBH1dHQUtIFDQ0dVPUPJWDghKs7DNymOgIwAA/iFYKavCWJ0AAAAASUVORK5CYII="},"7e71":function(t,e,n){t.exports=n.p+"static/img/en.522cd947.png"},8066:function(t){t.exports={common:{Search:"搜索"},components:{mixins:{UserCard:{Users:"用户",Create:"创建",CreateUser:"创建用户",UpdateUser:"更新用户",Update:"更新",Discard:"取消",View:"查看",Renew:"更新",Revoke:"重置",Delete:"删除",ActionMsg:"这个操作是是不可恢复的",Close:"关闭",Token:"Token",DateJoined:"出生日期",Username:"用户名",Email:"邮箱",FirstName:"名",LastName:"姓氏",Password:"密码",StaffUser:"员工用户",UserCreated:"用户已创建",UserUpdated:"用户已更新",UserDeleted:"用户已删除",Action:"执行",UsernameRequired:"用户名必填",EmailRequired:"邮箱必填",EmailValid:"邮箱格式不正确"}},core:{Fab:{Close:"关闭",Menu:"菜单"},Layout:{Person:"用户",Group:"分组",Users:"用户",Settings:"设置",Collapse:"折叠",Notifications:"通知",NoNotifications:"没有新消息",Clear:"清除",ToggleTheme:"主题开关",Logout:"退出",Overview:"总览",Minions:"客户端",Jobs:"Jobs",Run:"运行",JobTemplates:"Job模板",Conformity:"Conformity",Schedules:"计划任务",Events:"事件",Keys:"秘钥",Search:"搜索",Job_:"Job ","_published for_":"发布给","_returned for_":"返回给",JobEvent:"Job Event",NewJobCreated:"新Job创建"}},CommonSettings:{Title:"设置",Parse:"从解析模块:",Submit:"提交",Fields:"客户端字段",Delete:"删除",Create:"创建",Conformity:"自定义Conformity",Target:"目标",Name:"名",Function:"方法",Functions:"方法",ParseModulesStart:"开始解析模块",ConformityDeleted:"Conformity删除",ConformityCreated:"创建Conformity",MinionsFieldsCreated:"客户端字段创建"},ConformityCard:{Highstate:"高速率",true:"true",false:"false",unknown:"未知错误"},ConformityChart:{conformity:"Conformity",conform:"符合",conflict:"冲突",unknown:"未知错误"},ConformityDetailCard:{HighstateConformity:"高效Conformity"},ConformityTable:{Conformity:"Conformity",detail:"详情",highstate:"高效",Unknown:"未知",True:"True",False:"False","Minion id":"客户端id","Last Highstate":"最近高速率","Highstate Conformity":"高速率Conformity",Succeeded:"成功",Unchanged:"为改变",Failed:"失败",Actions:"行动"},CronPicker:{Cancel:"取消",Save:"保存"},EventsTable:{Events:"事件",Tag:"标签",Jid:"Jid",Target:"目标",Function:"方法",Arguments:"参数",Date:"日期"},InfosCard:{Common:"通用",Salt:"Salt",Hardware:"硬件"},JobsChartCard:{Stats:"Jobs状态",Filter:"筛选",Period:"周期",All:"全部",Highstate:"高速状态",Other:"其他",Week:"周",TwoWeeks:"两周",Month:"月",Year:"年"},JobsTable:{SearchJobs:"搜索Jobs",Cancel:"取消",Job:"Job",JID:"Jid",Target:"目标",Function:"方法",Arguments:"参数",KeywordArguments:"关键词",User:"用户",Status:"状态",Date:"日期",Action:"动作",Limit:"限制",SelectDate:"选择日期",Success:"成功",Failed:"失败",Rerun:"返回",Detail:"详情"},JobTemplatesTable:{JobTemplate:"Job模板",Run:"执行",Edit:"编辑",Delete:"删除",Name:"名称",Client:"客户端",TargetType:"目标类型",Target:"目标",Function:"方法",Arguments:"参数",KeywordArguments:"关键词",Batch:"批处理",Actions:"执行",TemplateDeleted:"模板已删除"},KeysStatusCard:{keys:"秘钥",saltWebsocket:"Salt Websocket",accepted:"接受",rejected:"驳回",denied:"已拒绝",unaccepted:"未接受"},Keys:{Refresh:"刷新秘钥",AcceptAll:"接受所有key",RejectAll:"驳回所有key",RefreshingKeys:"刷新秘钥",KeysRefreshed:"秘钥已刷新"},KeysTable:{Keys:"秘钥",MinionId:"客户端ID",Status:"状态",PublicKey:"公钥",Actions:"动作",reject:"驳回",delete:"删除",accept:"接受",accepted:"已接受",unaccepted:"未接受",rejected:"已驳回",denied:"已拒绝"},Minions:{RefreshAll:"刷新所有客户端",JobAll:"在客户端上执行所有Job",Refreshing:"刷新客户端",NbMinionsRefreshed:"{0} 个客户端已刷新"},MinionDetail:{RefreshMinion:"刷新",JobMinion:"执客户端Job",HighstateMinion:"执行highstate","Refreshing ":"正在刷新{0}",MinionRefreshed:"客户端已刷新",MissingMinion:"{0}不在当前数据库. 尝试刷新客户端"},MinionDetailCard:{Grains:"Grains",Pillar:"Pillar",History:"历史",Graph:"图表",Fold:"交叉",Unfold:"未交叉"},MinionsTable:{Minion:"客户端",Column:"列",Refresh:"刷新",Run:"执行Job",Delete:"删除",Msg1:"是否确认删除 ",Msg2:"你需要刷新所有客户端",Refreshing:"正在刷新 ",Deleted:" 已删除",Close:"关闭",Detail:"详情"},NetworkCard:{Network:"网络",Interface:"接口",MAC:"Mac",DNS:"Dns",IPV4Gateway:"IP V4 网关",IPV6Gateway:"IP V6 网关"},NotFound:{404:"404.未找到页面",Title:"出错了",Back:"返回"},RunCard:{Run:"运行",Formatted:"格式化",Cli:"命令行",ClientType:"客户端类型:",Info:"消息",Recurring:"重现:",Every:"每次",Results:"结果",Clear:"清除",Save:"保存",Test:"测试",TemplateSaved:"模板 {0} 已保存",SaveAsTemplate:"保存模板",JobTemplateName:"job模板名",Pillar:"Pillar",Schedule:"计划任务",ScheduleName:"计划名称",Async:"同步",Batch:"批处理",Timeout:"超时",TargetType:"目标类型",Target:"目标",Function:"方法",Arguments:"参数",KeywordArguments:"关键词参数",RunOnce:"一次运行： ",Running:"运行中",Scheduling:"计划中"},Schedules:{Refresh:"刷新计划",Refreshing:"再次刷新计划",Refreshed:"计划已刷新"},ScheduleTable:{Schedules:"计划",Disable:"禁用",Enable:"开启",Delete:"删除",MinionJobAction:"{0} on {1} for job {2}",MinionJobActionDone:"{0} on {1} for job {2}: done"},UserSettings:{UserSettings:"用户设置",JobsNotifications:"Jobs通知",MaxNotifications:"最大通知数",Submit:"提交",created:"创建",published:"已发布",returned:"已返回",event:"事件",UserSettingsUpdated:"用户已更新",Language:"语言"},AlcaliStatusCard:{Status:"状态",saltWebsocket:"Salt Websocket",jobs:"jobs",events:"事件",schedules:"计划任务",OK:"正常",NOT_OK:"不正常"},TerminalCard:{Running:"运行中 "}},views:{ConformityDetail:{Succeeded:"已成功",Unchanged:"未改动",Failed:"失败"},JobDetail:{Success:"成功",Failed:"失败",MinionID:"客户端ID:",Arguments:"参数:",KeywordArguments:"关键参数:",JobID:"JOB ID:",Function:"方法:",Status:"状态:",StartTime:"开始事件:",Results:"结果数"},Login:{LoginTitle:"登录",Login:"登录",Password:"密码",InvalidCredentials:"账户或密码不正确",Unauthorized:"未授权",SignIn:"登录"},Search:{NoResult:"对不起，没有结果",Success:"成功",Failed:"失败"}}}},8520:function(t,e,n){"use strict";n("b6e4")},"85ec":function(t,e,n){},"8e9c":function(t,e,n){},b6e4:function(t,e,n){},bf08:function(t,e,n){"use strict";n("e4b7")},c1b6:function(t,e,n){},e088:function(t){t.exports={common:{Search:"Search"},components:{mixins:{UserCard:{Users:"Users",Create:"Create",CreateUser:"Create user",UpdateUser:"Update user",Update:"Update",Discard:"Discard",View:"View",Renew:"Renew",Revoke:"Revoke",Delete:"Delete",ActionMsg:"this action is irreversible.",Close:"Close",Token:"Token",DateJoined:"Date Joined",Username:"Username",Email:"Email",FirstName:"First Name",LastName:"Last Name",Password:"Password",StaffUser:"Staff User",UserCreated:"User created",UserUpdated:"User updated",UserDeleted:"User deleted",Action:"Action",UsernameRequired:"Username is required",EmailRequired:"E-mail is required",EmailValid:"E-mail must be valid"}},core:{Fab:{Close:"close",Menu:"menu"},Layout:{Person:"person",Group:"Group",Users:"Users",Settings:"Settings",Collapse:"COLLAPSE",Notifications:"Notifications",NoNotifications:"no new notifications",Clear:"Clear",ToggleTheme:"Toggle Theme",Logout:"Logout",Overview:"Overview",Minions:"Minions",Jobs:"Jobs",Run:"Run",JobTemplates:"Job Templates",Conformity:"Conformity",Schedules:"Schedules",Events:"Events",Keys:"Keys",Search:"Search jids, minions, states...",Job_:"Job ","_published for_":" published for ","_returned for_":" returned for ",JobEvent:"Job Event",NewJobCreated:"New Job Created"}},CommonSettings:{Title:"Common Settings",Parse:"Parse modules from:",Submit:"Submit",Fields:"Minions fields",Delete:"Delete",Create:"Create",Conformity:"Custom conformity",Target:"Target",Name:"Name",Function:"Function",Functions:"Functions",ParseModulesStart:"Parse module started",ConformityDeleted:"Conformity deleted",ConformityCreated:"conformity created",MinionsFieldsCreated:"minions fields created"},ConformityCard:{Highstate:"Highstate",true:"true",false:"false",unknown:"unknown"},ConformityChart:{conformity:"Conformity",conform:"conform",conflict:"conflict",unknown:"unknown"},ConformityDetailCard:{HighstateConformity:"Highstate Conformity"},ConformityTable:{Conformity:"Conformity",detail:"detail",highstate:"highstate",Unknown:"Unknow",True:"True",False:"False","Minion id":"Minion id","Last Highstate":"Last Highstate","Highstate Conformity":"Highstate Conformity",Succeeded:"Succeeded",Unchanged:"Unchanged",Failed:"Failed",Actions:"Actions"},CronPicker:{Cancel:"Cancel",Save:"Save"},EventsTable:{Events:"Events",Tag:"Tag",Jid:"Jid",Target:"Target",Function:"Function",Arguments:"Arguments",Date:"Date"},InfosCard:{Common:"Common",Salt:"Salt",Hardware:"Hardware"},JobsChartCard:{Stats:"Jobs Stats",Filter:"Filter",Period:"Period",All:"All",Highstate:"Highstate",Other:"Other",Week:"Week",TwoWeeks:"Two Weeks",Month:"Month",Year:"Year"},JobsTable:{SearchJobs:"Search Jobs",Cancel:"Cancel",Job:"Job",JID:"Jid",Target:"Target",Function:"Function",Arguments:"Arguments",KeywordArguments:"Keyword Arguments",User:"User",Status:"Status",Date:"Date",Action:"Action",Limit:"Limit",SelectDate:"Select date(s)",Success:"Success",Failed:"Failed",Rerun:"rerun",Detail:"detail"},JobTemplatesTable:{JobTemplate:"Job Templates",Run:"run",Edit:"edit",Delete:"delete",Name:"Name",Client:"Client",TargetType:"Target Type",Target:"Target",Function:"Function",Arguments:"Arguments",KeywordArguments:"Keyword Arguments",Batch:"Batch",Actions:"Actions",TemplateDeleted:"Template deleted"},KeysStatusCard:{keys:"keys",saltWebsocket:"Salt Websocket",accepted:"accepted",rejected:"rejected",denied:"denied",unaccepted:"unaccepted"},Keys:{Refresh:"Refresh keys",AcceptAll:"Accept all keys",RejectAll:"Reject all keys",RefreshingKeys:"Refreshing keys",KeysRefreshed:"Keys refreshed"},KeysTable:{Keys:"Keys",MinionId:"Minion ID",Status:"Status",PublicKey:"Public keys",Actions:"Actions",reject:"reject",delete:"delete",accept:"accept",accepted:"Accepted",unaccepted:"Unaccepted",rejected:"Rejected",denied:"Denied"},Minions:{RefreshAll:"Refresh all minions",JobAll:"Run job on all minions",Refreshing:"Refreshing minions",NbMinionsRefreshed:"{0} minions refreshed"},MinionDetail:{RefreshMinion:"Refresh ",JobMinion:"Run job on ",HighstateMinion:"Run highstate on ","Refreshing ":"Refreshing {0}",MinionRefreshed:"Minion refreshed",MissingMinion:"{0} is not present in database. Try refreshing minions"},MinionDetailCard:{Grains:"Grains",Pillar:"Pillar",History:"History",Graph:"Graph",Fold:"fold",Unfold:"unfold"},MinionsTable:{Minion:"Minion",Column:"Column",Refresh:"Refresh",Run:"run job",Delete:"Delete",Msg1:"If you delete ",Msg2:" from the database, you will need to refresh all minions.",Refreshing:"Refreshing ",Deleted:" deleted",Close:"Close",Detail:"Details"},NetworkCard:{Network:"Network",Interface:"Interface",MAC:"Mac",DNS:"Dns",IPV4Gateway:"IP V4 Gateway",IPV6Gateway:"IP V6 Gateway"},NotFound:{404:"404. there is nos page here",Title:"Oops",Back:"Back"},RunCard:{Run:"Run",Formatted:"Formatted",Cli:"CLI",ClientType:"Client Type:",Info:"info",Recurring:"Recurring:",Every:"Every",Results:"Results",Clear:"Clear",Save:"Save",Test:"Test",TemplateSaved:"Template {0} saved",SaveAsTemplate:"Save as Template",JobTemplateName:"Job Template Name",Pillar:"Pillar",Schedule:"Schedule",ScheduleName:"Schedule Name",Async:"Async",Batch:"Batch",Timeout:"Timeout",TargetType:"Target Type",Target:"Target",Function:"Function",Arguments:"Arguments",KeywordArguments:"Keyword Arguments",RunOnce:"Once:  ",Running:"Running",Scheduling:"Scheduling"},Schedules:{Refresh:"Refresh schedules",Refreshing:"Refreshing schedules",Refreshed:"Schedules refreshed"},ScheduleTable:{Schedules:"Schedules",Disable:"disable",Enable:"enable",Delete:"Delete",MinionJobAction:"{0} on {1} for job {2}",MinionJobActionDone:"{0} on {1} for job {2}: done"},UserSettings:{UserSettings:"User Settings",JobsNotifications:"Jobs Notifications",MaxNotifications:"Max Notifications",Submit:"Submit",created:"created",published:"published",returned:"returned",event:"event",UserSettingsUpdated:"user settings updated",Language:"Language"},AlcaliStatusCard:{Status:"Status",saltWebsocket:"Salt Websocket",jobs:"jobs",events:"events",schedules:"schedules",OK:"OK",NOT_OK:"NOT OK"},TerminalCard:{Running:"Running "}},views:{ConformityDetail:{Succeeded:"Succeeded",Unchanged:"Unchanged",Failed:"Failed"},JobDetail:{Success:"Success",Failed:"Failed",MinionID:"MINION ID:",Arguments:"ARGUMENTS:",KeywordArguments:"KEYWORD ARGUMENTS:",JobID:"JOB ID:",Function:"FUNCTION:",Status:"STATUS:",StartTime:"START TIME:",Results:"Results"},Login:{LoginTitle:"Login",Login:"Login",Password:"Password",InvalidCredentials:"Invalid Login / Password",Unauthorized:"Unauthorized",SignIn:"sign in"},Search:{NoResult:"Sorry... No results.",Success:"Success",Failed:"Failed"}}}},e4b7:function(t,e,n){},e87f:function(t,e,n){},ef12:function(t,e,n){"use strict";n("383d")},efe9:function(t,e,n){},fc94:function(t,e,n){"use strict";n("e87f")}});
//# sourceMappingURL=app.dbb57512.js.map